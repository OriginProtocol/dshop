(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{294:function(e,n,t){"use strict";var a=t(2),r=t.n(a),c=t(5),o=t.n(c),i=t(35),l=t.n(i),s=t(36),u=t(3),d=t.n(u),m=t(90),p=t(4),b={};try{b.mainnet=t(298),b.rinkeby=t(299),b.localhost=t(300)}catch(e){}var f=["function balanceOf(address owner) view returns (uint256)","function allowance(address owner, address spender) view returns (uint256)","function approve(address spender, uint256 value) returns (bool)","function decimals() view returns (uint8)","function symbol() view returns (string)"],g=["function makeOffer(uint listingID, bytes32 ipfsHash, uint finalizes, address affiliate, uint256 commission, uint value, address currency, address arbitrator) payable","event OfferCreated (address indexed party, uint indexed listingID, uint indexed offerID, bytes32 ipfsHash)",{constant:!0,inputs:[{name:"",type:"uint256"},{name:"",type:"uint256"}],name:"offers",outputs:[{name:"value",type:"uint256"},{name:"commission",type:"uint256"},{name:"refund",type:"uint256"},{name:"currency",type:"address"},{name:"buyer",type:"address"},{name:"affiliate",type:"address"},{name:"arbitrator",type:"address"},{name:"finalizes",type:"uint256"},{name:"status",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"}],h=new l.a.utils.Interface(g);function y(){return(y=o()(r.a.mark((function e(n){var t,a,c,o,i,l,u,m,p,b,f,g,y,v,k,E,O,j,w;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.tx,a=n.password,c=n.config,o=n.provider,i=n.marketplace,0!==t.indexOf("0x")){e.next=23;break}return p=d()(c,"listingId"),e.next=5,o.getTransactionReceipt(t);case 5:if(b=e.sent){e.next=9;break}return console.log("Could not find receipt"),e.abrupt("return",null);case 9:return f=b.logs.map((function(e){try{return h.parseLog(e)}catch(e){}})).filter((function(e){return e})).find((function(e){return"OfferCreated"===e.name})),g=f.args.listingID.toNumber(),y=f.args.offerID.toNumber(),v=f.args.ipfsHash,e.next=15,Object(s.get)(c.ipfsGateway,v,1e4);case 15:return k=e.sent,l=k.encryptedData,u="".concat(p,"-").concat(y),e.next=20,i.offers(g,y);case 20:m=e.sent,e.next=24;break;case 23:l=t;case 24:return e.prev=24,e.next=27,Object(s.get)(c.ipfsGateway,l,1e4);case 27:return E=e.sent,e.next=30,openpgp.message.readArmored(E.buyerData);case 30:return O=e.sent,e.next=33,openpgp.decrypt({message:O,passwords:[a]});case 33:return j=e.sent,(w=JSON.parse(j.data)).offerId=u,e.abrupt("return",{cart:w,offer:m});case 39:return e.prev=39,e.t0=e.catch(24),e.abrupt("return",null);case 42:case"end":return e.stop()}}),e,null,[[24,39]])})))).apply(this,arguments)}n.a=function(){var e=Object(p.a)().config,n=Object(m.a)(),t=n.status,a=n.provider;if("enabled"!==t)return{};var r=a?a.getSigner():null,c=b[localStorage.ognNetwork||"localhost"],o=c.OGN,i=c.Marketplace_V01,s=new l.a.Contract(o,f,r||a),u=new l.a.Contract(i,g,r||a);return{ogn:s,marketplace:u,provider:a,signer:r,getOffer:function(n){return function(e){return y.apply(this,arguments)}({tx:n.tx,password:n.password,config:e,provider:a,marketplace:u})}}}},309:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(0),o=t.n(c),i=t(17),l=t(296),s=t(9),u=t.n(s),d=t(4),m=t(6),p=t(8),b=t.n(p),f=t(10),g=t.n(f),h=t(3),y=t.n(h),v=t(19),k=t(37),E=t(7),O=t(27),j=t.n(O),w=function(e){var n=e.className,t=e.value,a=e.onChange,r=j()(Object.keys(k.a).map((function(e){return{code:e.code,title:e}})),"title");return o.a.createElement("select",{value:t,onChange:a,className:n,autoComplete:"shipping country",name:"checkout[shipping_address][country]"},o.a.createElement("option",{"data-code":"US",value:"United States"},"United States"),o.a.createElement("option",{disabled:"disabled",value:"---"},"---"),r.map((function(e,n){return o.a.createElement("option",{key:"".concat(e.code,"-").concat(n),"data-code":e.code,value:e.title},e.title)})))},x=function(e){var n=e.country,t=e.value,a=e.onChange,r=e.className;if(!n||!n.provinces)return null;var c=j()(Object.keys(n.provinces).map((function(e){return{code:e.code,title:e}})),"title");return o.a.createElement("select",{value:t,onChange:a,className:r},t?null:o.a.createElement("option",{value:""},"Select State..."),c.map((function(e,n){return o.a.createElement("option",{key:"".concat(e.code,"-").concat(n),"data-code":e.code,value:e.title},e.title)})))},N=t(91),S=t.n(N),P=function(e){var n=e.prefix,t=void 0===n?"":n,a=e.state,r=e.setState,c=e.input,i=e.Feedback,l=function(e){return t?"".concat(t).concat(S()(e)):e},s=k.a[a[l("country")]||"United States"];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("input",b()({placeholder:"First Name"},c(l("firstName")))),i(l("firstName"))),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("input",b()({placeholder:"Last Name"},c(l("lastName")))),i(l("lastName")))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",b()({placeholder:"Address"},c(l("address1")))),i(l("address1"))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",b()({placeholder:"Apartment, suite, etc. (optional)"},c(l("address2")))),i(l("address2"))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",b()({placeholder:"City"},c(l("city")))),i(l("city"))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md"},o.a.createElement(w,{className:"form-control",value:a[l("country")],onChange:function(e){var n,t=y()(k.a[e.target.value],"provinces");r((n={},g()(n,l("country"),e.target.value),g()(n,l("province"),t?Object.keys(t)[0]:""),n))}})),s.provinces?o.a.createElement("div",{className:"form-group col-md"},o.a.createElement(x,b()({className:"form-control",country:s},c(l("province")))),i(l("province"))):null,o.a.createElement("div",{className:"form-group col-md"},o.a.createElement("input",b()({type:"text",className:"form-control",placeholder:y()(s,"labels.zip",k.b.labels.zip)},c(l("zip")))),i(l("zip")))))},C=function(){if(!Object(d.a)().config.beta)return null;var e=Object(c.useState)(),n=r()(e,2),t=n[0],a=n[1];return o.a.createElement("div",{className:"alert alert-warning beta-warning"},o.a.createElement("b",null,"Note:")," This site is in Beta and not yet accepting real credit cards or crypto currency. Please use Rinkeby for crypto transactions or click"," ",o.a.createElement("a",{href:"#test",onClick:function(e){e.preventDefault(),a(!0)}},"here")," for a test credit card number.",t?o.a.createElement("div",{className:"mt-2"},"Test Credit card: 4111-1111-1111-1111, Exp 11-21, CVC 111"):null)};function D(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?D(Object(t),!0).forEach((function(n){g()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}t(9)("\n  .beta-warning\n    margin-top: 2rem\n    font-size: 0.875rem\n");var z=function(){var e=Object(d.a)().config,n=Object(i.g)(),t=Object(m.b)(),a=r()(t,2),l=a[0].cart,s=a[1],u=Object(c.useState)(l.userInfo||{country:"United States"}),p=r()(u,2),f=p[0],g=p[1],h=function(e){return g(T(T({},f),e))},O=Object(v.b)(f,(function(e){return h(e)})),j=Object(v.a)(f);return o.a.createElement("div",{className:"checkout-information"},o.a.createElement("div",{className:"d-none d-md-block"},o.a.createElement("h3",null,e.fullTitle),o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement(E.a,{to:"/cart"},"Cart"),o.a.createElement("span",null,o.a.createElement("b",null,"Information")),o.a.createElement("span",null,"Shipping"),o.a.createElement("span",null,"Payment"))),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=function(e){var n={};e.email?e.email.length<3&&(n.emailError="Email is too short"):n.emailError="Enter an email address",e.firstName||(n.firstNameError="Enter a first name"),e.lastName||(n.lastNameError="Enter a last name"),e.address1||(n.address1Error="Enter an address"),e.city||(n.cityError="Enter a city");var t=y()(k.a,"".concat(e.country,".provinces"),{});return!e.province&&Object.keys(t).length&&(n.provinceError="Enter a state / province"),e.zip||(n.zipError="Enter a ZIP / postal code"),{valid:Object.keys(n).every((function(e){return e.indexOf("Error")<0})),newState:T(T({},e),n)}}(f),a=t.valid,r=t.newState;h(r),a?(s({type:"updateUserInfo",info:r}),n.push({pathname:"/checkout/shipping",state:{scrollToTop:!0}})):window.scrollTo(0,0)}},o.a.createElement("div",{className:"mb-3"},o.a.createElement("b",null,"Contact information")),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6 mb-0"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",b()({type:"email",placeholder:"Email"},O("email"))),j("email"))),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("input",b()({type:"tel",placeholder:"Mobile phone (optional)"},O("phone"))),j("phone"))),o.a.createElement("div",{className:"mb-3"},o.a.createElement("b",null,"Shipping Address")),o.a.createElement(P,{state:f,setState:h,input:O,Feedback:j}),o.a.createElement("div",{className:"actions"},o.a.createElement(E.a,{to:"/cart"},"« Return to cart"),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg"},"Continue to shipping")),o.a.createElement(C,null)))};t(9)("\n");var A=t(16),I=t(2),F=t.n(I),M=t(5),B=t.n(M),U=t(15);var R=function(){var e=Object(d.a)().config,n=Object(m.b)(),t=r()(n,2),a=t[0],o=a.shippingZones,i=a.cart,l=t[1],s=Object(c.useState)(!1),u=r()(s,2),p=u[0],b=u[1],f=Object(c.useState)(!1),g=r()(f,2),h=g[0],y=g[1];return Object(c.useEffect)((function(){function n(){return(n=B()(F.a.mark((function n(){var t,a,r,c;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b(!0),t=[],n.prev=2,!e.shippingApi){n.next=11;break}return n.next=6,fetch("".concat(e.backend,"/shipping"),{method:"POST",credentials:"include",headers:{authorization:"bearer ".concat(e.backendAuthToken),"Content-Type":"application/json"},body:JSON.stringify({items:i.items,recipient:i.userInfo})});case 6:return a=n.sent,n.next=9,a.json();case 9:!1!==(r=n.sent).success&&(t=r);case 11:if(t.length){n.next=18;break}return n.next=14,fetch("".concat(Object(U.a)(),"shipping.json"));case 14:return c=n.sent,n.next=17,c.json();case 17:t=n.sent;case 18:b(!1),l({type:"setShippingZones",zones:t}),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(2),b(!1),y(!0);case 26:case"end":return n.stop()}}),n,null,[[2,22]])})))).apply(this,arguments)}o.length||function(){n.apply(this,arguments)}()}),[]),{shippingZones:o,loading:p,error:h}},L=function(){var e=Object(m.b)(),n=r()(e,1)[0].cart.userInfo;return n?o.a.createElement("div",{className:"info-row"},o.a.createElement("div",{className:"label"},"Contact"),o.a.createElement("div",{className:"value"},n.email),o.a.createElement(E.a,{className:"change",to:"/checkout"},"Change")):null},q=function(){var e=Object(m.b)(),n=r()(e,1)[0].cart.userInfo;if(!n)return null;var t=n.address1,a=n.city,c=n.zip,i=n.country,l=n.province?"".concat(n.province," "):"";return o.a.createElement("div",{className:"info-row"},o.a.createElement("div",{className:"label"},"Ship to"),o.a.createElement("div",{className:"value"},"".concat(t,", ").concat(a,", ").concat(l).concat(c,", ").concat(i)),o.a.createElement(E.a,{className:"change",to:"/checkout"},"Change"))};function _(e,n){return y()(n,"shipping.id")===e.id?"active":"inactive"}var H=function(){var e=Object(d.a)().config,n=Object(m.b)(),t=r()(n,2),a=t[0].cart,i=t[1],l=R(),s=l.shippingZones,u=l.loading,p=y()(a,"userInfo.country"),b=y()(k.a,"".concat(p,".code")),f=s.find((function(e){return!e.countries})),g=s.filter((function(e){return(e.countries||[]).indexOf(b)>=0}));!g.length&&f&&g.push(f);var h=a.items.filter((function(e){var n=y()(e,"restrictShippingTo",[]);return!!n.length&&n.indexOf(b)<0}));Object(c.useEffect)((function(){var e=y()(a,"shipping.id"),n=g.find((function(n){return n.id===e}));if(!a.shipping||!n){var t=g[0];t&&i({type:"updateShipping",zone:t})}}),[s.length]);var v=h.length||!g.length;return o.a.createElement("div",{className:"checkout-shipping"},o.a.createElement("div",{className:"d-none d-md-block"},o.a.createElement("h3",null,e.fullTitle),o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement(E.a,{to:"/cart"},"Cart"),o.a.createElement(E.a,{to:"/checkout"},"Information"),o.a.createElement("span",null,o.a.createElement("b",null,"Shipping")),o.a.createElement("span",null,"Payment"))),o.a.createElement("div",{className:"checkout-review-info"},o.a.createElement(L,null),o.a.createElement(q,null)),o.a.createElement("div",{className:"mt-4 mb-3"},o.a.createElement("b",null,"Shipping Method")),o.a.createElement("div",{className:"checkout-payment-method"},h.length?o.a.createElement("div",null,"Sorry, these items cannot be shipped to ".concat(p,":"),o.a.createElement("ul",{className:"mt-2"},h.map((function(e,n){return o.a.createElement("li",{key:n},e.title)})))):u?o.a.createElement("div",null,"Loading shipping costs..."):g.length?g.map((function(e){return o.a.createElement("label",{key:e.id,className:"radio ".concat(_(e,a))},o.a.createElement("input",{type:"radio",name:"shippingMethod",checked:y()(a,"shipping.id")===e.id,onChange:function(){return i({type:"updateShipping",zone:e})}}),o.a.createElement("div",null,o.a.createElement("div",null,e.label),o.a.createElement("div",{className:"description"},e.detail)),o.a.createElement("span",{className:"ml-auto"},e.amount?Object(A.a)(e.amount):"Free"))})):o.a.createElement("div",null,"Sorry, there was an error calculating shipping costs.")),o.a.createElement("div",{className:"actions"},o.a.createElement(E.a,{to:"/checkout"},"« Return to information"),v?o.a.createElement("button",{className:"btn btn-primary btn-lg disabled"},"Continue to payment"):o.a.createElement(E.a,{to:"/checkout/payment",className:"btn btn-primary btn-lg"},"Continue to payment")),o.a.createElement(C,null))};t(9)("\n  .checkout-review-info\n    border: 1px solid #eee\n    border-radius: 0.5rem\n    padding: 0 1rem\n    .info-row\n      display: flex\n      justify-content: space-between\n      border-bottom: 1px solid #eee\n      padding: 1rem 0\n      align-items: center\n      &:last-of-type\n        border: 0\n      .label\n        color: #666\n        width: 100px\n      .value\n        flex: 1\n      .change\n        text-align: right\n        font-size: 0.75rem\n      a\n        color: #1990c6\n  @media (max-width: 767.98px)\n    .checkout-review-info\n      .info-row\n        flex-wrap: wrap\n        .label\n          width: 70%\n        .value\n          width: 100%\n          order: 3\n        .change\n          width: 30%\n");var Z=t(36);function G(){return(G=B()(F.a.mark((function e(n,t){var a,r,c,o,i,l,s;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.pgpPublicKey,r=t.ipfsApi,e.next=3,openpgp.key.readArmored(a);case 3:return c=e.sent,o=Array.from(crypto.getRandomValues(new Uint32Array(5))),n.dataKey=o.map((function(e){return e.toString(36)})).join(""),e.next=8,openpgp.encrypt({message:openpgp.message.fromText(JSON.stringify(n)),passwords:[n.dataKey]});case 8:return i=e.sent,e.next=11,openpgp.encrypt({message:openpgp.message.fromText(JSON.stringify(n)),publicKeys:c.keys});case 11:return l=e.sent,e.next=14,Object(Z.post)(r,{data:l.data,buyerData:i.data},!0);case 14:return s=e.sent,e.abrupt("return",{hash:s,auth:n.dataKey,bytes32:Object(Z.getBytes32FromIpfsHash)(s)});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e,n){return G.apply(this,arguments)},K=t(301),V=t.n(K),W=function(e){var n=e.loading,t=e.className,a=e.children,r=V()(e,["loading","className","children"]);return o.a.createElement("button",b()({className:"btn-loading ".concat(t||"").concat(n?" loading":"")},r),o.a.createElement("span",{className:"btn-content"},a))};t(9)('\n  @keyframes spin\n    0%\n      transform: rotate(0deg)\n    100%\n      transform: rotate(359deg)\n  .btn-loading\n    position: relative\n    &.loading\n      .btn-content\n        visibility: hidden\n      &:before\n        content: ""\n        background-image: url(images/spinner.svg)\n        background-repeat: no-repeat\n        background-size: 20%\n        background-position: center\n        position: absolute\n        top: 0\n        left: 0\n        right: 0\n        bottom: 0\n        animation: spin 1.2s linear infinite\n\n');var $=t(35),Y=t.n($),Q="https://bridge.originprotocol.com/utils/exchange-rates";var X=function(){var e=Object(c.useState)({}),n=r()(e,2),t=n[0],a=n[1];return Object(c.useEffect)((function(){function e(){return(e=B()(F.a.mark((function e(){var n,t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Q);case 2:return n=e.sent,e.next=5,n.json();case 5:t=e.sent,a(t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{exchangeRates:t,toTokenPrice:function(e,n){return t[n]?String(e/100*t[n]).substr(0,6):""}}},ee=t(294);var ne=function(e){var n=e.submit,t=e.activeToken,a=e.encryptedData,o=e.onChange,i=e.buttonText,l=Object(ee.a)(),s=l.signer,u=l.ogn,p=l.marketplace,b=Object(d.a)().config,f=X().toTokenPrice,g=Object(m.b)(),h=r()(g,1)[0].cart,v=Object(c.useState)(i),k=r()(v,1)[0],E="crypto"===y()(h,"paymentMethod.id");Object(c.useEffect)((function(){function e(){return(e=B()(F.a.mark((function e(){var n,r,c,i,l,d,m,g;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({disabled:!0,buttonText:"Awaiting approval..."}),n=b.listingId.split("-"),r=n[n.length-1],c=1209600,i=f(h.total,t.name),l=Y.a.utils.parseUnits(i,"ether"),e.next=8,s.getAddress();case 8:return d=e.sent,m="token-ETH"===t.id?Y.a.constants.AddressZero:u.address,e.next=12,Object(Z.post)(b.ipfsApi,{schemaId:"https://schema.originprotocol.com/offer_2.0.0.json",listingId:b.listingId,listingType:"unit",unitsPurchased:1,totalPrice:{amount:0,currency:"encrypted"},commission:{currency:"OGN",amount:"0"},finalizes:c,encryptedData:a.hash});case 12:g=e.sent,p.makeOffer(r,g,c,Y.a.constants.AddressZero,0,l,m,d,{value:"token-ETH"===t.id?l:0}).then((function(e){o({buttonText:"Confirming transaction..."}),e.wait().then((function(){o({tx:e.hash})}))})).catch((function(){o({disabled:!1,buttonText:k})}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}E&&n&&function(){e.apply(this,arguments)}()}),[n])};function te(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?te(Object(t),!0).forEach((function(n){g()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(c.useState)({shouldRefetchBalance:0,hasBalance:!1,loading:!0,hasAllowance:!1}),t=r()(n,2),a=t[0],o=t[1],i=Object(ee.a)(),l=i.provider,s=i.signer,u=i.ogn,d=i.marketplace,p=function(e){return o(ae(ae({},a),e))},b=X(),f=b.exchangeRates,g=Object(m.b)(),h=r()(g,1),y=h[0].cart;return Object(c.useEffect)((function(){function n(){return(n=B()(F.a.mark((function n(){var t,a,r,c,o,i,m,b,g,h,v,k,E;return F.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p({loading:!0}),console.log("getBalance",e.id),n.next=4,s.getAddress();case 4:if(t=n.sent,"token-ETH"!==e.id){n.next=15;break}return n.next=8,l.getBalance(t);case 8:a=n.sent,r=Y.a.utils.formatUnits(a,"ether"),c=Math.floor(Number(r)/f.ETH*100),o=c>=y.total,p({hasBalance:o,hasAllowance:!0,loading:!1}),n.next=35;break;case 15:if("token-OGN"!==e.id){n.next=34;break}return n.next=18,u.balanceOf(t);case 18:if(i=n.sent,m=Y.a.utils.formatUnits(i,"ether"),b=Math.floor(Number(m)/f.OGN*100),console.log({balanceUSD:b,balanceNum:m}),g=b>y.total,h=!1,!g){n.next=31;break}return n.next=27,u.allowance(t,d.address);case 27:v=n.sent,k=Y.a.utils.formatUnits(v,"ether"),E=Math.ceil(Number(k)/f.OGN*100),h=E>=y.total;case 31:p({hasBalance:g,hasAllowance:h,loading:!1}),n.next=35;break;case 34:p({hasAllowance:!1,hasBalance:!1,loading:!1});case 35:case"end":return n.stop()}}),n)})))).apply(this,arguments)}f[e.name]&&function(){n.apply(this,arguments)}()}),[e.name,a.shouldRefetchBalance]),ae(ae({},a),{},{refetchBalance:function(){p({shouldRefetchBalance:a.shouldRefetchBalance+1})}})},ce=t(90),oe=[{id:"token-OGN",name:"OGN"},{id:"token-DAI",name:"DAI"},{id:"token-ETH",name:"ETH"}],ie=function(e){var n=e.submit,t=e.encryptedData,a=e.onChange,i=e.buttonText,l=Object(d.a)().config,s=Object(ee.a)(),u=s.ogn,p=s.marketplace,b=Object(m.b)(),f=r()(b,2),g=f[0].cart,h=f[1],v=Object(c.useState)({}),k=r()(v,2),E=k[0],O=k[1],j=re(E),w=X(),x=w.exchangeRates,N=w.toTokenPrice,S=Object(c.useState)(!1),P=r()(S,2),C=P[0],D=P[1],T=Object(c.useState)(!1),z=r()(T,2),A=z[0],I=z[1],M=Object(ce.a)();ne({submit:n,activeToken:E,encryptedData:t,onChange:a,buttonText:i});var U=y()(l,"paymentMethods",[]),R="crypto"===y()(g,"paymentMethod.id"),L=U.find((function(e){return"crypto"===e.id}));if(!L)return null;var q=l.acceptedTokens||oe;Object(c.useEffect)((function(){var e={disabled:"enabled"!==M.status||!E.id||!j.hasBalance||!j.hasAllowance||j.loading};E.id&&(e.buttonText="Pay ".concat(N(g.total,E.name)," ").concat(E.name)),a(e)}),[E.id,j.loading]);var _=o.a.createElement("label",{className:"radio".concat(R?"":" inactive")},o.a.createElement("input",{type:"radio",name:"paymentMethod",checked:R,onChange:function(){h({type:"updatePaymentMethod",method:L})}}),"Crypto Currency");return R?"loading"===M.status?o.a.createElement(o.a.Fragment,null,_,o.a.createElement("div",{className:"mt-2"},"Loading Wallet Status...")):"disabled"===M.status?o.a.createElement(o.a.Fragment,null,_,o.a.createElement("div",{className:"mt-2"},o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return M.enable()}},"Enable Crypto Wallet"))):o.a.createElement(o.a.Fragment,null,_,R?o.a.createElement("div",{className:"pay-with-crypto pl-4 pt-2"},o.a.createElement("div",{className:"tokens"},q.map((function(e){return o.a.createElement("div",{key:e.id,className:E.id===e.id?"active":"",onClick:function(){return O(e)}},o.a.createElement("div",null,"Pay with ".concat(e.name)),o.a.createElement("div",null,"".concat(N(g.total,e.name)," ").concat(e.name)),o.a.createElement("div",{className:"sm"},"1 ".concat(e.name," = $").concat((1/x[e.name]).toFixed(2))))}))),!E.id||j.loading?null:j.hasBalance?j.hasAllowance?null:o.a.createElement("div",{className:"alert alert-info mt-3 mb-0 d-flex align-items-center"},"Please unlock your ".concat(E.name," to continue"),o.a.createElement("button",{className:"btn btn-primary btn-sm ml-3".concat(C||A?" disabled":""),onClick:B()(F.a.mark((function e(){var n,t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C&&!A){e.next=2;break}return e.abrupt("return",!1);case 2:n=N(g.total,E.name),t=Y.a.utils.parseUnits(n,"ether"),D(!0),u.approve(p.address,t).then((function(e){return I(!0),D(!1),e.wait()})).then((function(){j.refetchBalance(),I(!1)})).catch((function(e){I(!1),D(!1),console.log(e)}));case 6:case"end":return e.stop()}}),e)})))},A?"Waiting":C?"Awaiting approval...":"Unlock")):o.a.createElement("div",{className:"alert alert-danger mt-3 mb-0"},"Insufficient balance")):null):_};t(9)("\n  .pay-with-crypto\n    .tokens\n      display: flex\n      > div\n        border: 1px solid #eee\n        padding: 1rem\n        border-radius: 0.5rem\n        margin-right: 1rem\n        cursor: pointer\n        text-align: center\n        opacity: 0.75\n        &:hover\n          opacity: 1\n        &.active\n          opacity: 1\n          border-color: #007bff\n        .sm\n          font-size: 0.75rem\n          margin-top: 0.25rem\n\n  @media (max-width: 767.98px)\n    .pay-with-crypto\n      .tokens\n        flex-direction: column\n        > div:not(:last-child)\n          margin-bottom: 1rem\n");var le=t(29);function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){g()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=Object(l.injectStripe)((function(e){var n=e.stripe,t=e.submit,a=e.encryptedData,i=e.onChange,s=Object(d.a)().config,u=Object(le.a)(),p=Object(m.b)(),b=r()(p,2),f=b[0].cart,g=b[1],h=Object(c.useState)(),k=r()(h,2),E=k[0],O=k[1],j=Object(c.useState)({}),w=r()(j,2),x=w[0],N=w[1],S=y()(s,"paymentMethods",[]),P="stripe"===y()(f,"paymentMethod.id"),C=S.find((function(e){return"stripe"===e.id})),D=Object(v.a)(x);return Object(c.useEffect)((function(){if(n&&P&&!E){console.log("Make Stripe payment request...");try{var e=n.paymentRequest({country:"US",currency:"usd",total:{label:"Item Total",amount:f.subTotal},requestPayerName:!0,requestPayerEmail:!0,requestShipping:!0,shippingOptions:[f.shipping]});e.on("token",(function(e){var n=e.complete,t=e.token,a=V()(e,["complete","token"]);console.log("Received Stripe token: ",t),console.log("Received customer information: ",a),n("success")})),O(e)}catch(e){console.log("paymentRequest error",e)}i({disabled:!1})}}),[n,P,E]),Object(c.useEffect)((function(){n&&P&&E&&t&&fetch("".concat(s.backend,"/pay"),{headers:{"content-type":"application/json",authorization:"bearer ".concat(s.backendAuthToken)},credentials:"include",method:"POST",body:JSON.stringify({amount:f.total,data:a.hash,listingId:s.listingId})}).then((function(e){return e.json()})).then((function(e){if(e.success){var t=f.userInfo,r={line1:t.address1,line2:t.address2,city:t.city,state:t.province,postal_code:t.zip},c="".concat(t.firstName," ").concat(t.lastName),o=r,l=c;t.billingDifferent&&(o={line1:t.billingAddress1,line2:t.billingAddress2,city:t.billingCity,state:t.billingProvince,postal_code:t.billingZip},l="".concat(t.billingFirstName," ").concat(t.billingLastName));var s={shipping:{name:c,address:r},payment_method_data:{billing_details:{name:l,email:f.userInfo.email,address:o}}};n.handleCardPayment(e.client_secret,s).then((function(e){e.error?(N(ue(ue({},x),{},{cardError:e.error.message})),i({loading:!1})):i({tx:a.hash,loading:!1})})).catch((function(e){console.log(e),N(ue(ue({},x),{},{cardError:"Payment server error. Please try again later."})),i({loading:!1})}))}else N(ue(ue({},x),{},{cardError:e.message}))}))}),[n,P,t]),o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"radio align-items-center".concat(P?"":" inactive")},o.a.createElement("input",{type:"radio",name:"paymentMethod",checked:P,onChange:function(){return g({type:"updatePaymentMethod",method:C})}}),"Credit Card",u?null:o.a.createElement("div",{className:"cards"},o.a.createElement("div",{className:"visa"}),o.a.createElement("div",{className:"master"}),o.a.createElement("div",{className:"amex"}),o.a.createElement("div",{className:"discover"}),"and more...")),P?o.a.createElement("div",{className:"pl-4 pb-3 pt-3"},o.a.createElement("div",{className:"form-row"},o.a.createElement(l.CardElement,{className:"form-control",style:{base:{fontSize:"16px",lineHeight:"24px"}}}),D("card"),o.a.createElement("img",{src:"images/powered_by_stripe.svg",className:"ml-auto mt-2"}))):null)}));t(9)("\n");var me=t(308),pe=t.n(me);function be(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?be(Object(t),!0).forEach((function(n){g()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ge=function(e,n){return e&&100*e.normalizedBalance>=n.total};var he=function(e){var n=e.value,t=e.onChange,a=Object(d.a)().config,i=Object(m.b)(),l=r()(i,2),s=l[0].cart,u=l[1],p=Object(le.a)(),b=Object(c.useState)({authed:!1}),f=r()(b,2),g=f[0],h=f[1],v=Object(c.useState)(),k=r()(v,2),E=k[0],O=k[1],j=Object(c.useState)(0),w=r()(j,2),x=w[0],N=w[1],S=Object(c.useState)([]),P=r()(S,2),C=P[0],D=P[1],T=y()(a,"paymentMethods",[]),z=y()(s,"paymentMethod.id"),A=T.find((function(e){return"uphold"===e.id}));if(!A)return null;Object(c.useEffect)((function(){function e(){return(e=B()(F.a.mark((function e(){var n,t,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.backend,"/uphold/authed"),e.next=3,fetch(n,{credentials:"include",headers:{authorization:"bearer ".concat(a.backendAuthToken)}});case 3:return t=e.sent,e.next=6,t.json();case 6:r=e.sent,O(r.redirect),h(r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.backend&&function(){e.apply(this,arguments)}()}),[a,x]),Object(c.useEffect)((function(){function e(){return(e=B()(F.a.mark((function e(){var n,r,c;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(a.backend,"/uphold/cards"),e.next=3,fetch(n,{credentials:"include",headers:{authorization:"bearer ".concat(a.backendAuthToken)}});case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,"object"===pe()(c)&&c[0]&&(D(c),t({id:c[0].id,hasBalance:ge(c[0],s)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&function(){e.apply(this,arguments)}()}),[g]),Object(c.useEffect)((function(){var e=C.find((function(e){return e.id===y()(n,"id")}));e&&t({id:e.id,hasBalance:ge(e,s)})}),[s.total]),Object(c.useEffect)((function(){upholdSelected&&submit&&fetch("".concat(a.backend,"/uphold/pay"),{method:"POST",credentials:"include",headers:{Authorization:"bearer ".concat(a.backendAuthToken),"Content-Type":"application/json"},body:JSON.stringify({card:upholdCard.id,data:hash,amount:s.total/100})}).then((function(e){e.error?(setFormData(fe(fe({},formData),{},{cardError:e.error.message})),setLoading(!1)):history.push("/order/".concat(hash,"?auth=").concat(auth))})).catch((function(e){console.log(e),setFormData(fe(fe({},formData),{},{cardError:"Payment server error. Please try again later."})),setLoading(!1)}))}),[]);var I=C.find((function(e){return e.id===y()(n,"id")})),M=ge(I,s),U="uphold"===z?"":" inactive";return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"radio align-items-center".concat(U)},o.a.createElement("input",{type:"radio",name:"paymentMethod",checked:"uphold"===z,onChange:function(){return u({type:"updatePaymentMethod",method:A})}}),"Uphold",g.authed?o.a.createElement("div",{className:"uphold-logout"},"Logged into Uphold as ".concat(g.name,". "),o.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),fetch("".concat(a.backend,"/uphold/logout"),{credentials:"include",headers:{authorization:"bearer ".concat(a.backendAuthToken)},method:"POST"}).then((function(){N(x+1)}))}},"Logout")):null),"uphold"===z&&o.a.createElement("div",{className:"pl-4 pb-3 pt-3"},g.authed?C.length?o.a.createElement("table",{className:"table table-sm table-hover uphold-cards"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Select a card:"),p?null:o.a.createElement("th",null,"Amount"),o.a.createElement("th",null,"Amount (USD)"))),o.a.createElement("tbody",null,C.map((function(e){return o.a.createElement("tr",{key:e.id,onClick:function(){return t({id:e.id,hasBalance:ge(e,s)})}},o.a.createElement("td",null,o.a.createElement("input",{type:"radio",className:"mr-2",checked:y()(n,"id")===e.id,onChange:function(){return t({id:e.id,hasBalance:ge(e,s)})}}),o.a.createElement("span",{className:"uphold-currency currency--".concat(e.currency.toLowerCase())},e.currency),p?null:o.a.createElement("span",{className:"d-none d-xl-inline"},e.label)),p?null:o.a.createElement("td",null,"".concat((a=e.balance,String(a).replace(/^([0-9]+\.[0-9]{4}).*/,"$1"))," ").concat(e.currency)),o.a.createElement("td",null,"$ ".concat(e.normalizedBalance.toFixed(2)," USD")));var a})))):null:o.a.createElement("a",{href:E,onClick:function(e){e.preventDefault();var n=window.open(E,"","width=330,height=400");window.addEventListener("message",(function e(t){String(t.data).match(/ok/)&&(window.removeEventListener("message",e,!1),N(x+1),n.closed||n.close())}),!1)}},o.a.createElement("img",{src:"images/connect_with_uphold.svg"})),g.authed?C.length&&M?null:o.a.createElement("div",{className:"alert alert-danger mt-3 mb-0"},"Insufficient balance on Uphold"):null))};t(9)("\n  .uphold-logout\n    font-size: 0.875rem\n    margin-left: auto\n    margin-right: 0.5rem\n    color: #666\n  .uphold-cards\n    tr\n      cursor: pointer\n      font-size: 0.875rem\n      th\n        border-top: 0\n  .uphold-currency\n    padding: 2px\n    display: inline-block\n    border-radius: 3px\n    margin-right: 0.5rem\n    width: 2.5rem\n    color: #fff\n    text-align: center\n    font-size: 0.75rem\n  .currency--aapl\n    background-color: #000\n\n  .currency--ada\n    background-color: #0d1e30\n\n  .currency--adbe\n    background-color: #ed1c24\n\n  .currency--aed\n    background-color: #248d48\n\n  .currency--amd\n    background-color: #000\n\n  .currency--amzn\n    background-color: #ff9d22\n\n  .currency--ars\n    background-color: #75aadb\n\n  .currency--atom\n    background-color: #1b1e36\n\n  .currency--aud\n    background-color: #febd23\n\n  .currency--ba\n    background-color: #115fab\n\n  .currency--baba\n    background-color: #ff6a00\n\n  .currency--bac\n    background-color: #e31837\n\n  .currency--bat\n    background-color: #808696\n\n  .currency--bch\n    background-color: #f7931a\n\n  .currency--bgn\n    background-color: #00966e\n\n  .currency--bmy\n    background-color: #be2bbb\n\n  .currency--brk.b\n    background-color: #452138\n\n  .currency--brl\n    background-color: #2d6447\n\n  .currency--btc\n    background-color: #ffb251\n\n  .currency--btg\n    background-color: #eba808\n\n  .currency--c\n    background-color: #452138\n\n  .currency--cad\n    background-color: #ed2939\n\n  .currency--chf\n    background-color: #d52b1e\n\n  .currency--cmcsa\n    background-color: #0089cf\n\n  .currency--cny\n    background-color: #eb4242\n\n  .currency--csco\n    background-color: #049fd9\n\n  .currency--czk\n    background-color: #d7141a\n\n  .currency--dash\n    background-color: #1b77b8\n\n  .currency--dcr\n    background-color: #2ed6a1\n\n  .currency--dhr\n    background-color: #013c81\n\n  .currency--dis\n    background-color: #1300bc\n\n  .currency--dgb\n    background-color: #06c\n\n  .currency--dkk\n    background-color: #cc0001\n\n  .currency--doge\n    background-color: #c2a633\n\n  .currency--eem\n    background-color: #176cd2\n\n  .currency--efa\n    background-color: #1780d2\n\n  .currency--eos\n    background-color: #111a44\n\n  .currency--eth\n    background-color: #444341\n\n  .currency--eur\n    background-color: #557bc8\n\n  .currency--ewz\n    background-color: #1776d2\n\n  .currency--fb\n    background-color: #1777f2\n\n  .currency--fxi\n    background-color: #179ed2\n\n  .currency--gbp\n    background-color: #9f6ecc\n\n  .currency--gdx\n    background-color: #221e1f\n\n  .currency--gld\n    background-color: #13a96c\n\n  .currency--goog\n    background-color: #34a853\n\n  .currency--googl\n    background-color: #4285f4\n\n  .currency--hd\n    background-color: #ee7125\n\n  .currency--hkd\n    background-color: #c8102e\n\n  .currency--hrk\n    background-color: #ff202d\n\n  .currency--huf\n    background-color: #087b39\n\n  .currency--hyg\n    background-color: #1794d2\n\n  .currency--ils\n    background-color: #69f\n\n  .currency--inr\n    background-color: #f47500\n\n  .currency--intc\n    background-color: #0071c5\n\n  .currency--iota\n    background-color: #000\n\n  .currency--isk\n    background-color: #00589d\n\n  .currency--ivv\n    background-color: #17a8d2\n\n  .currency--iwm\n    background-color: #1762d2\n\n  .currency--jnj\n    background-color: #d51900\n\n  .currency--jpm\n    background-color: #117aca\n\n  .currency--jpy\n    background-color: #ccc\n\n  .currency--kes\n    background-color: #a1250f\n\n  .currency--lba\n    background-color: #0957c3\n\n  .currency--link\n    background-color: #2a5ada\n\n  .currency--lqd\n    background-color: #178ad2\n\n  .currency--ltc\n    background-color: #6d6d6d\n\n  .currency--ma\n    background-color: #f90\n\n  .currency--msft\n    background-color: #737373\n\n  .currency--mu\n    background-color: #0077c8\n\n  .currency--mxn\n    background-color: #005d40\n\n  .currency--nano\n    background-color: #4a90e2\n\n  .currency--neo\n    background-color: #58bf00\n\n  .currency--nflx\n    background-color: #e50914\n\n  .currency--nok\n    background-color: #ef2b2d\n\n  .currency--nvda\n    background-color: #77b900\n\n  .currency--nzd\n    background-color: #212121\n\n  .currency--omg\n    background-color: #1a53f0\n\n  .currency--pg\n    background-color: #003cae\n\n  .currency--php\n    background-color: #4169e1\n\n  .currency--pln\n    background-color: crimson\n\n  .currency--qqq\n    background-color: #193989\n\n  .currency--roku\n    background-color: #6c3c97\n\n  .currency--ron\n    background-color: #fcd116\n\n  .currency--sek\n    background-color: #0071b8\n\n  .currency--sgd\n    background-color: #f42a41\n\n  .currency--spy\n    background-color: #189f71\n\n  .currency--storm\n    background-color: #6b38df\n\n  .currency--t\n    background-color: #00a8e0\n\n  .currency--tlt\n    background-color: #17b2d2\n\n  .currency--tqqq\n    background-color: #03576a\n\n  .currency--trx\n    background-color: #dc062b\n\n  .currency--tsla\n    background-color: #c00\n\n  .currency--unh\n    background-color: #1c3d95\n\n  .currency--usd\n    background-color: #5a9f4f\n\n  .currency--upbtc\n    background-color: #2744f7\n\n  .currency--upeur\n    background-color: #2744f7\n\n  .currency--upt\n    background-color: #2744f7\n\n  .currency--upusd\n    background-color: #2744f7\n\n  .currency--v\n    background-color: #00579f\n\n  .currency--vox\n    background-color: #4a4a4f\n\n  .currency--wfc\n    background-color: #b31e30\n\n  .currency--xag\n    background-color: #b2b2b2\n\n  .currency--xau\n    background-color: #eed06f\n\n  .currency--xem\n    background-color: #78b6e4\n\n  .currency--xlf\n    background-color: #0fbd67\n\n  .currency--xlm\n    background-color: #000\n\n  .currency--xlu\n    background-color: #1c8b76\n\n  .currency--xom\n    background-color: #ed1b2d\n\n  .currency--xpd\n    background-color: #acb4b7\n\n  .currency--xpt\n    background-color: #c9bcb5\n\n  .currency--xrp\n    background-color: #222\n\n  .currency--zil\n    background-color: #00c3bf\n\n  .currency--zrx\n    background-color: #000\n\n  .currency--brave\n    background-color: #ff2000\n\n");var ye=function(e){var n=e.formState,t=e.setFormState,a=e.input,r=e.Feedback,c=n.billingDifferent;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mt-4 mb-3"},o.a.createElement("b",null,"Billing Address"),o.a.createElement("div",null,"Select the address that matches your card or payment method.")),o.a.createElement("div",{className:"checkout-payment-method"},o.a.createElement("label",{className:"radio ".concat(c?"active":"inactive")},o.a.createElement("input",{type:"radio",name:"billingDifferent",checked:!n.billingDifferent,onChange:function(){return t({billingDifferent:!1})}}),o.a.createElement("div",null,o.a.createElement("div",null,"Same as shipping address"))),o.a.createElement("label",{className:"radio ".concat(c?"active mb-3":"inactive")},o.a.createElement("input",{type:"radio",name:"billingDifferent",checked:!!n.billingDifferent,onChange:function(){return t({billingDifferent:!0})}}),o.a.createElement("div",null,o.a.createElement("div",null,"Use a different billing address"))),n.billingDifferent?o.a.createElement(P,b()({prefix:"billing"},{state:n,setState:t,input:a,Feedback:r})):null))};function ve(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ke(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ve(Object(t),!0).forEach((function(n){g()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ee=function(){var e=Object(i.g)(),n=Object(d.a)().config,t=Object(m.b)(),a=r()(t,2),l=a[0],s=l.cart,u=l.referrer,p=a[1],f=Object(c.useState)({buttonText:"Pay ".concat(Object(A.a)(s.total)),submit:0}),g=r()(f,2),h=g[0],O=g[1],j=function(e){return O(ke(ke({},h),e))};Object(c.useEffect)((function(){var n=h.tx,t=h.encryptedData;n&&e.push("/order/".concat(n,"?auth=").concat(t.auth))}),[h]);var w=y()(s,"paymentMethod.id"),x=Object(c.useState)(ke(ke({},s.userInfo),{},{billingCountry:y()(s,"userInfo.billingCountry")||"United States"})),N=r()(x,2),S=N[0],P=N[1],C=function(e){return P(ke(ke({},S),e))},D=Object(v.b)(S,(function(e){return C(e)})),T=y()(n,"paymentMethods",[]);Object(c.useEffect)((function(){1===T.length&&p({type:"updatePaymentMethod",method:T[0]})}),[T.length]);var z=Object(v.a)(S),I=h.disabled||!w,F="stripe"!==w;return o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),!I){var t=function(e){if(!e.billingDifferent)return Object.keys(e).forEach((function(n){n.indexOf("Error")>0&&delete e[n]})),{valid:!0,newState:e};var n={};e.billingFirstName||(n.billingFirstNameError="Enter a first name"),e.billingLastName||(n.billingLastNameError="Enter a last name"),e.billingAddress1||(n.billingAddress1Error="Enter an address"),e.billingCity||(n.billingCityError="Enter a city"),e.billingZip||(n.billingZipError="Enter a ZIP / postal code");var t=y()(k.a,"".concat(e.billingCountry,".provinces"),{});return!e.billingProvince&&Object.keys(t).length&&(n.billingProvinceError="Enter a state / province"),{valid:Object.keys(n).every((function(e){return e.indexOf("Error")<0})),newState:ke(ke({},e),n)}}(S),a=t.valid,r=t.newState;C(r),a&&(p({type:"updateUserInfo",info:r}),J(ke(ke({},s),{},{referrer:u}),n).then((function(e){j({encryptedData:e,submit:h.submit+1})})))}}},o.a.createElement("div",{className:"checkout-payment-method"},o.a.createElement(ie,b()({},h,{onChange:j})),o.a.createElement(de,b()({},h,{onChange:j})),o.a.createElement(he,b()({},h,{onChange:j}))),F?null:o.a.createElement(ye,{formState:S,setFormState:C,input:D,Feedback:z}),o.a.createElement("div",{className:"actions"},o.a.createElement(E.a,{to:"/checkout/shipping"},"« Return to shipping"),o.a.createElement(W,{type:"submit",className:"btn btn-primary btn-lg".concat(I?" disabled":""),loading:h.loading,children:h.buttonText})))};t(9)("\n  .checkout-payment-method\n    border: 1px solid #eee\n    border-radius: 0.5rem\n    padding: 1rem\n    label\n      margin-bottom: 0\n    label .description\n      font-size: 0.875rem\n      color: #666\n    label.inactive\n      cursor: pointer\n      &:hover\n        color: #666\n    label:not(:first-child)\n      border-top: 1px solid #eee\n      margin-top: 1rem\n      padding-top: 1rem\n    .radio\n      display: flex\n      align-items: baseline\n      input\n        margin-right: 0.5rem\n        margin-bottom: 3px\n      .cards\n        margin-left: auto\n        display: flex\n        font-size: 12px\n        color: #737373\n        align-items: center\n        > div\n          width: 38px\n          height: 24px\n          margin-right: 4px\n          &.visa\n            background: url(images/visa.svg)\n          &.master\n            background: url(images/master.svg)\n          &.amex\n            background: url(images/amex.svg)\n          &.discover\n            background: url(images/discover.svg)\n          &:last-child\n            margin-right: 8px\n\n");var Oe=function(){var e=Object(d.a)().config,n=Object(m.b)(),t=r()(n,1)[0].cart;return o.a.createElement("div",{className:"checkout-shipping"},o.a.createElement("div",{className:"d-none d-md-block"},o.a.createElement("h3",null,e.fullTitle),o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement(E.a,{to:"/cart"},"Cart"),o.a.createElement(E.a,{to:"/checkout"},"Information"),o.a.createElement(E.a,{to:"/checkout/shipping"},"Shipping"),o.a.createElement("span",null,"Payment"))),o.a.createElement("div",{className:"checkout-review-info"},o.a.createElement(L,null),o.a.createElement(q,null),o.a.createElement("div",{className:"info-row"},o.a.createElement("div",{className:"label"},"Method"),o.a.createElement("div",{className:"value"},y()(t,"shipping.label")),o.a.createElement(E.a,{className:"change",to:"/checkout/shipping"},"Change"))),o.a.createElement("div",{className:"mt-4 mb-3"},o.a.createElement("b",null,"Payment"),o.a.createElement("div",null,"All transactions are secure and encrypted")),o.a.createElement(Ee,null),o.a.createElement(C,null))},je=t(92);n.default=function(){var e=Object(d.a)().config,n=Object(i.g)(),t=Object(m.b)(),a=r()(t,1)[0].cart,s=Object(c.useState)(null),p=r()(s,2),b=p[0],f=p[1];return Object(c.useEffect)((function(){if(a.items.length)if(window.Stripe)f(window.Stripe(e.stripeKey));else{if(e.stripe&&e.stripeKey){var t=document.createElement("script");t.src="https://js.stripe.com/v3/",t.addEventListener("load",(function(){f(window.Stripe(e.stripeKey))})),document.head.appendChild(t)}u.a.addStylesheet()}else n.push("/cart")}),[]),o.a.createElement(l.StripeProvider,{stripe:b},o.a.createElement(l.Elements,null,o.a.createElement("div",{className:"checkout"},o.a.createElement("h3",{className:"d-md-none my-4 ml-4"},e.fullTitle),o.a.createElement("div",{className:"user-details"},o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/checkout/shipping",component:H}),o.a.createElement(i.b,{path:"/checkout/payment",component:Oe}),o.a.createElement(i.b,{path:"/checkout",component:z}))),o.a.createElement("div",{className:"order-summary-wrap"},o.a.createElement(je.a,{cart:a,discountForm:!0,donationForm:!0})))))};t(9)("\n  .checkout\n    display: flex\n    h3,h4,h5\n      font-weight: 400\n    .breadcrumbs\n      font-size: 0.8rem\n      a\n        color: #1990c6\n    > .user-details\n      flex: 7\n      padding: 3rem\n      display: flex\n      justify-content: flex-end\n      .checkout-information,.checkout-shipping\n        padding: 1rem\n        max-width: 600px\n        width: 100%\n      .actions\n        display: flex\n        justify-content: space-between\n        align-items: center\n        margin-top: 2rem\n    > .order-summary-wrap\n      padding: 3rem\n      flex: 6\n      min-height: 100vh\n      border-width: 0 0 0 1px\n      border-style: solid\n      border-color: #ddd\n      background: #f6f6f6\n\n\n  @media (max-width: 767.98px)\n    .checkout\n      flex-direction: column\n      > .user-details\n        padding: 1rem\n        order: 2\n        .checkout-information,.checkout-shipping\n          padding: 1rem 0\n        .actions\n          flex-direction: column-reverse\n          margin-bottom: 5rem\n          *\n            margin-bottom: 2rem\n      > .order-summary-wrap\n        padding: 1rem 1.25rem\n        border-width: 1px 0 1px 0\n        min-height: 0\n        .toggle-order-summary\n          display: flex\n          justify-content: space-between\n          .txt\n            color: #1990c6\n          .icon-caret\n            fill: #1990c6\n            margin-left: 0.5rem\n          .icon-cart\n            margin-right: 0.5rem\n            width: 1.5rem\n          &.active\n            .icon-caret\n              transform: scaleY(-1)\n\n        .order-summary\n          margin-top: 2rem\n          display: none\n          &.show\n            display: block\n\n")}}]);