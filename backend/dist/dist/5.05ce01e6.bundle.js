(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1643:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(0),o=t.n(c),i=t(41),l=t(519),u=t(427),s=t(886),d=t(10),m=t.n(d),p=t(6),b=t(7),f=t(9),g=t.n(f),y=t(12),h=t.n(y),v=t(3),k=t.n(v),E=t(22),w=t(46),N=t(8),x=t(31),O=t.n(x),S=function(e){var n=e.className,t=e.value,r=e.onChange,a=O()(Object.keys(w.a).map((function(e){return{code:e.code,title:e}})),"title");return o.a.createElement("select",{value:t,onChange:r,className:n,autoComplete:"shipping country",name:"checkout[shipping_address][country]"},o.a.createElement("option",{"data-code":"US",value:"United States"},"United States"),o.a.createElement("option",{disabled:"disabled",value:"---"},"---"),a.map((function(e,n){return o.a.createElement("option",{key:"".concat(e.code,"-").concat(n),"data-code":e.code,value:e.title},e.title)})))},j=function(e){var n=e.country,t=e.value,r=e.onChange,a=e.className;if(!n||!n.provinces)return null;var c=O()(Object.keys(n.provinces).map((function(e){return{code:e.code,title:e}})),"title");return o.a.createElement("select",{value:t,onChange:r,className:a},t?null:o.a.createElement("option",{value:""},"Select State..."),c.map((function(e,n){return o.a.createElement("option",{key:"".concat(e.code,"-").concat(n),"data-code":e.code,value:e.title},e.title)})))},C=t(108),D=t.n(C),P=function(e){var n=e.prefix,t=void 0===n?"":n,r=e.state,a=e.setState,c=e.input,i=e.Feedback,l=function(e){return t?"".concat(t).concat(D()(e)):e},u=w.a[r[l("country")]||"United States"];return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("input",g()({placeholder:"First Name"},c(l("firstName")))),i(l("firstName"))),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("input",g()({placeholder:"Last Name"},c(l("lastName")))),i(l("lastName")))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",g()({placeholder:"Address"},c(l("address1")))),i(l("address1"))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",g()({placeholder:"Apartment, suite, etc. (optional)"},c(l("address2")))),i(l("address2"))),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",g()({placeholder:"City"},c(l("city")))),i(l("city"))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md"},o.a.createElement(S,{className:"form-control",value:r[l("country")],onChange:function(e){var n,t=k()(w.a[e.target.value],"provinces");a((n={},h()(n,l("country"),e.target.value),h()(n,l("province"),t?Object.keys(t)[0]:""),n))}})),u.provinces?o.a.createElement("div",{className:"form-group col-md"},o.a.createElement(j,g()({className:"form-control",country:u},c(l("province")))),i(l("province"))):null,o.a.createElement("div",{className:"form-group col-md"},o.a.createElement("input",g()({type:"text",className:"form-control",placeholder:k()(u,"labels.zip",w.b.labels.zip)},c(l("zip")))),i(l("zip")))))},A=function(){if(!Object(p.a)().config.beta)return null;var e=Object(c.useState)(),n=a()(e,2),t=n[0],r=n[1];return o.a.createElement("div",{className:"alert alert-warning beta-warning"},o.a.createElement("b",null,"Note:")," This site is in Beta and not yet accepting real credit cards or crypto currency. Please use Rinkeby for crypto transactions or click"," ",o.a.createElement("a",{href:"#test",onClick:function(e){e.preventDefault(),r(!0)}},"here")," for a test credit card number.",t?o.a.createElement("div",{className:"mt-2"},"Test Credit card: 4111-1111-1111-1111, Exp 11-21, CVC 111"):null)};function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){h()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}t(10)("\n  .beta-warning\n    margin-top: 2rem\n    font-size: 0.875rem\n");var $=function(){var e=Object(p.a)().config,n=Object(i.g)(),t=Object(b.b)(),r=a()(t,2),l=r[0].cart,u=r[1],s=Object(c.useState)(l.userInfo||{country:"United States"}),d=a()(s,2),m=d[0],f=d[1],y=function(e){return f(I({},m,{},e))},h=Object(E.b)(m,(function(e){return y(e)})),v=Object(E.a)(m);return o.a.createElement("div",{className:"checkout-information"},o.a.createElement("div",{className:"d-none d-md-block"},o.a.createElement("h3",null,e.fullTitle),o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement(N.a,{to:"/cart"},"Cart"),o.a.createElement("span",null,o.a.createElement("b",null,"Information")),o.a.createElement("span",null,"Shipping"),o.a.createElement("span",null,"Payment"))),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=function(e){var n={};e.email?e.email.length<3&&(n.emailError="Email is too short"):n.emailError="Enter an email address",e.firstName||(n.firstNameError="Enter a first name"),e.lastName||(n.lastNameError="Enter a last name"),e.address1||(n.address1Error="Enter an address"),e.city||(n.cityError="Enter a city");var t=k()(w.a,"".concat(e.country,".provinces"),{});return!e.province&&Object.keys(t).length&&(n.provinceError="Enter a state / province"),e.zip||(n.zipError="Enter a ZIP / postal code"),{valid:Object.keys(n).every((function(e){return e.indexOf("Error")<0})),newState:I({},e,{},n)}}(m),r=t.valid,a=t.newState;y(a),r?(u({type:"updateUserInfo",info:a}),n.push({pathname:"/checkout/shipping",state:{scrollToTop:!0}})):window.scrollTo(0,0)}},o.a.createElement("div",{className:"mb-3"},o.a.createElement("b",null,"Contact information")),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6 mb-0"},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",g()({type:"email",placeholder:"Email"},h("email"))),v("email"))),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("input",g()({type:"tel",placeholder:"Mobile phone (optional)"},h("phone"))),v("phone"))),o.a.createElement("div",{className:"mb-3"},o.a.createElement("b",null,"Shipping Address")),o.a.createElement(P,{state:m,setState:y,input:h,Feedback:v}),o.a.createElement("div",{className:"actions"},o.a.createElement(N.a,{to:"/cart"},"« Return to cart"),o.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg"},"Continue to shipping")),o.a.createElement(A,null)))};t(10)("\n");var U=t(17),M=t(2),z=t.n(M),B=t(5),R=t.n(B),q=t(16);var F=function(){var e=Object(p.a)().config,n=Object(b.b)(),t=a()(n,2),r=t[0],o=r.shippingZones,i=r.cart,l=t[1],u=Object(c.useState)(!1),s=a()(u,2),d=s[0],m=s[1],f=Object(c.useState)(!1),g=a()(f,2),y=g[0],h=g[1];return Object(c.useEffect)((function(){function n(){return(n=R()(z.a.mark((function n(){var t,r,a,c;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(m(!0),t=[],n.prev=2,!e.shippingApi){n.next=11;break}return n.next=6,fetch("".concat(e.backend,"/shipping"),{method:"POST",credentials:"include",headers:{authorization:"bearer ".concat(e.backendAuthToken),"Content-Type":"application/json"},body:JSON.stringify({items:i.items,recipient:i.userInfo})});case 6:return r=n.sent,n.next=9,r.json();case 9:!1!==(a=n.sent).success&&(t=a);case 11:if(t.length){n.next=18;break}return n.next=14,fetch("".concat(Object(q.a)(),"shipping.json"));case 14:return c=n.sent,n.next=17,c.json();case 17:t=n.sent;case 18:m(!1),l({type:"setShippingZones",zones:t}),n.next=26;break;case 22:n.prev=22,n.t0=n.catch(2),m(!1),h(!0);case 26:case"end":return n.stop()}}),n,null,[[2,22]])})))).apply(this,arguments)}o.length||function(){n.apply(this,arguments)}()}),[]),{shippingZones:o,loading:d,error:y}},_=function(){var e=Object(b.b)(),n=a()(e,1)[0].cart.userInfo;return n?o.a.createElement("div",{className:"info-row"},o.a.createElement("div",{className:"label"},"Contact"),o.a.createElement("div",{className:"value"},n.email),o.a.createElement(N.a,{className:"change",to:"/checkout"},"Change")):null},W=function(){var e=Object(b.b)(),n=a()(e,1)[0].cart.userInfo;if(!n)return null;var t=n.address1,r=n.city,c=n.zip,i=n.country,l=n.province?"".concat(n.province," "):"";return o.a.createElement("div",{className:"info-row"},o.a.createElement("div",{className:"label"},"Ship to"),o.a.createElement("div",{className:"value"},"".concat(t,", ").concat(r,", ").concat(l).concat(c,", ").concat(i)),o.a.createElement(N.a,{className:"change",to:"/checkout"},"Change"))};function K(e,n){return k()(n,"shipping.id")===e.id?"active":"inactive"}var G=function(){var e=Object(p.a)().config,n=Object(b.b)(),t=a()(n,2),r=t[0].cart,i=t[1],l=F(),u=l.shippingZones,s=l.loading,d=k()(r,"userInfo.country"),m=k()(w.a,"".concat(d,".code")),f=u.find((function(e){return!e.countries})),g=u.filter((function(e){return(e.countries||[]).indexOf(m)>=0}));!g.length&&f&&g.push(f);var y=r.items.filter((function(e){var n=k()(e,"restrictShippingTo",[]);return!!n.length&&n.indexOf(m)<0}));Object(c.useEffect)((function(){var e=k()(r,"shipping.id"),n=g.find((function(n){return n.id===e}));if(!r.shipping||!n){var t=g[0];t&&i({type:"updateShipping",zone:t})}}),[u.length]);var h=y.length||!g.length;return o.a.createElement("div",{className:"checkout-shipping"},o.a.createElement("div",{className:"d-none d-md-block"},o.a.createElement("h3",null,e.fullTitle),o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement(N.a,{to:"/cart"},"Cart"),o.a.createElement(N.a,{to:"/checkout"},"Information"),o.a.createElement("span",null,o.a.createElement("b",null,"Shipping")),o.a.createElement("span",null,"Payment"))),o.a.createElement("div",{className:"checkout-review-info"},o.a.createElement(_,null),o.a.createElement(W,null)),o.a.createElement("div",{className:"mt-4 mb-3"},o.a.createElement("b",null,"Shipping Method")),o.a.createElement("div",{className:"checkout-payment-method"},y.length?o.a.createElement("div",null,"Sorry, these items cannot be shipped to ".concat(d,":"),o.a.createElement("ul",{className:"mt-2"},y.map((function(e,n){return o.a.createElement("li",{key:n},e.title)})))):s?o.a.createElement("div",null,"Loading shipping costs..."):g.length?g.map((function(e){return o.a.createElement("label",{key:e.id,className:"radio ".concat(K(e,r))},o.a.createElement("input",{type:"radio",name:"shippingMethod",checked:k()(r,"shipping.id")===e.id,onChange:function(){return i({type:"updateShipping",zone:e})}}),o.a.createElement("div",null,o.a.createElement("div",null,e.label),o.a.createElement("div",{className:"description"},e.detail)),o.a.createElement("span",{className:"ml-auto"},e.amount?Object(U.a)(e.amount):"Free"))})):o.a.createElement("div",null,"Sorry, there was an error calculating shipping costs.")),o.a.createElement("div",{className:"actions"},o.a.createElement(N.a,{to:"/checkout"},"« Return to information"),h?o.a.createElement("button",{className:"btn btn-primary btn-lg disabled"},"Continue to payment"):o.a.createElement(N.a,{to:"/checkout/payment",className:"btn btn-primary btn-lg"},"Continue to payment")),o.a.createElement(A,null))};t(10)("\n  .checkout-review-info\n    border: 1px solid #eee\n    border-radius: 0.5rem\n    padding: 0 1rem\n    .info-row\n      display: flex\n      justify-content: space-between\n      border-bottom: 1px solid #eee\n      padding: 1rem 0\n      align-items: center\n      &:last-of-type\n        border: 0\n      .label\n        color: #666\n        width: 100px\n      .value\n        flex: 1\n      .change\n        text-align: right\n        font-size: 0.75rem\n      a\n        color: #1990c6\n  @media (max-width: 767.98px)\n    .checkout-review-info\n      .info-row\n        flex-wrap: wrap\n        .label\n          width: 70%\n        .value\n          width: 100%\n          order: 3\n        .change\n          width: 30%\n");var L=t(518),J=t.n(L),H=t(426);var Z=t(34);function Y(){return(Y=R()(z.a.mark((function e(n){var t,r,a,c,o,i,l,u,s,d,m,p,b;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.backend,r=n.backendAuthToken,a=n.stripe,c=n.cart,o=n.encryptedData,i=n.listingId,e.next=3,fetch("".concat(t,"/pay"),{headers:{"content-type":"application/json",authorization:"bearer ".concat(r)},credentials:"include",method:"POST",body:JSON.stringify({amount:Math.round(c.total),data:o.hash,listingId:i})});case 3:return l=e.sent,e.next=6,l.json();case 6:return u=e.sent,s=c.userInfo,d={line1:s.address1,city:s.city,state:s.province,postal_code:s.zip},m="".concat(s.firstName," ").concat(s.lastName),p=d,b=m,s.billingDifferent&&(p={line1:s.billingAddress1,city:s.billingCity,state:s.billingProvince,postal_code:s.billingZip},b="".concat(s.billingFirstName," ").concat(s.billingLastName)),e.abrupt("return",a.handleCardPayment(u.client_secret,{shipping:{name:m,address:d},payment_method_data:{billing_details:{name:b,email:c.userInfo.email,address:p}}}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){return Y.apply(this,arguments)},Q=t(43);function X(){return(X=R()(z.a.mark((function e(n,t){var r,a,c,o,i,l,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.pgpPublicKey,a=context.config.ipfsRPC,e.next=4,openpgp.key.readArmored(r);case 4:return c=e.sent,o=Array.from(crypto.getRandomValues(new Uint32Array(5))),n.dataKey=o.map((function(e){return e.toString(36)})).join(""),e.next=9,openpgp.encrypt({message:openpgp.message.fromText(JSON.stringify(n)),passwords:[n.dataKey]});case 9:return i=e.sent,e.next=12,openpgp.encrypt({message:openpgp.message.fromText(JSON.stringify(n)),publicKeys:c.keys});case 12:return l=e.sent,e.next=15,Object(Q.post)(a,{data:l.data,buyerData:i.data},!0);case 15:return u=e.sent,e.abrupt("return",{hash:u,auth:n.dataKey});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e,n){return X.apply(this,arguments)},ne=t(378),te=t.n(ne),re=t(357),ae=t.n(re);function ce(){var e=te()(["\n  query WalletStatus {\n    web3 {\n      networkId\n      networkName\n      walletType\n      metaMaskEnabled\n      metaMaskAvailable\n      metaMaskApproved\n      metaMaskUnlocked\n      metaMaskNetworkId\n      metaMaskNetworkName\n      metaMaskAccount {\n        id\n      }\n    }\n  }\n"]);return ce=function(){return e},e}var oe=ae()(ce());function ie(){var e=te()(["\n  mutation MakeOffer(\n    $listingID: String!\n    $value: String!\n    $from: String\n    $quantity: Int!\n    $currency: String\n    $fractionalData: FractionalOfferInput\n    $shippingAddress: ShippingAddressInput\n    $autoswap: Boolean\n    $commission: String\n    $encryptedData: String\n  ) {\n    makeOffer(\n      listingID: $listingID\n      value: $value\n      from: $from\n      quantity: $quantity\n      currency: $currency\n      fractionalData: $fractionalData\n      shippingAddress: $shippingAddress\n      autoswap: $autoswap\n      commission: $commission\n      encryptedData: $encryptedData\n    ) {\n      id\n    }\n  }\n"]);return ie=function(){return e},e}var le=ae()(ie());function ue(){var e=te()(["\n  query GetCurrencies {\n    currencies {\n      __typename\n      ... on Currency {\n        id\n        name\n        code\n        priceInUSD\n      }\n      ... on Token {\n        decimals\n      }\n    }\n  }\n"]);return ue=function(){return e},e}var se=ae()(ue());var de=function(e){return function(n){var t=Object(H.b)(se).data;return o.a.createElement(e,g()({},n,{currencies:k()(t,"currencies")||[]}))}},me=t(1638),pe=t.n(me);var be=[["fiat-USD","USD","$"],["fiat-GBP","GBP","£"],["fiat-EUR","EUR","€"],["fiat-KRW","KRW","₩"],["fiat-JPY","JPY","¥"],["fiat-CNY","CNY","¥"],["fiat-SGD","SGD","S$"]],fe=be.reduce((function(e,n){return e[n[0]]=n,e}),{}),ge=be.reduce((function(e,n){return e[n[1]]=n,e}),{}),ye=(ge.EUR,ge.EUR,ge.EUR,ge.EUR,ge.EUR,ge.EUR,ge.USD,ge.GBP,ge.KRW,ge.JPY,ge.CNY,ge.SGD,de((function(e){var n=e.className,t=e.target,r=e.currencies,a=e.prefix,c=void 0===a?"":a,i=J()(e,["className","target","currencies","prefix"]),l=k()(i.price,"currency"),u=k()(i.price,"amount");if(!l)return null;var s="string"==typeof l?l:l.id,d=r.find((function(e){return e.id===s})),m=r.find((function(e){return e.id===t}))||d;if(!d)return null;var p=0===m.id.indexOf("fiat-");u=u*d.priceInUSD/m.priceInUSD,u=pe()(u,i.decimals||5);var b=!m.code.match(/^(USD|EUR|GBP)$/),f=p?function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(isNaN(e)||null==e)return"";var c=1,o="";e>1e6&&a?(c=1e6,o="M"):e>1e3&&a&&(c=1e3,o="K");var i=(e=(e/c).toFixed(~~n)).split("."),l=i[0],u=i[1]&&i[1]>0?t+i[1]:"";return"".concat(l.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)).concat(u).concat(o)}(u,2).replace(".00",""):u,g=k()(fe,"".concat(m.id,".2"),""),y="".concat(g).concat(f).concat(b?" ".concat(m.code):"");return o.a.createElement("span",{className:n},c,y)}))),he=function(e){var n=e.loading,t=e.className,r=e.children,a=J()(e,["loading","className","children"]);return o.a.createElement("button",g()({className:"btn-loading ".concat(t||"").concat(n?" loading":"")},a),o.a.createElement("span",{className:"btn-content"},r))};t(10)('\n  @keyframes spin\n    0%\n      transform: rotate(0deg)\n    100%\n      transform: rotate(359deg)\n  .btn-loading\n    position: relative\n    &.loading\n      .btn-content\n        visibility: hidden\n      &:before\n        content: ""\n        background-image: url(images/spinner.svg)\n        background-repeat: no-repeat\n        background-size: 20%\n        background-position: center\n        position: absolute\n        top: 0\n        left: 0\n        right: 0\n        bottom: 0\n        animation: spin 1.2s linear infinite\n\n');var ve=t(48),ke=t.n(ve);function Ee(){var e=te()(["\n  mutation AllowToken(\n    $token: String!\n    $from: String!\n    $to: String!\n    $value: String!\n  ) {\n    updateTokenAllowance(token: $token, from: $from, to: $to, value: $value) {\n      id\n    }\n  }\n"]);return Ee=function(){return e},e}var we=ae()(Ee());function Ne(){var e=te()(["\n  query TransactionReceipt($id: ID!) {\n    web3 {\n      blockNumber\n      transactionReceipt(id: $id) {\n        id\n        blockNumber\n        status\n        events {\n          id\n          event\n          returnValues {\n            listingID\n            offerID\n            party\n            ipfsHash\n          }\n          returnValuesArr {\n            field\n            value\n          }\n        }\n      }\n    }\n  }\n"]);return Ne=function(){return e},e}var xe=ae()(Ne());function Oe(){var e=te()(["\n  subscription onNewBlock {\n    newBlock {\n      id\n      number\n    }\n  }\n"]);return Oe=function(){return e},e}var Se=ae()(Oe()),je=function(e){var n=e.hash,t=e.event,r=Object(H.b)(xe,{variables:{id:n},skip:!n||"pending"===n}),a=r.data,c=r.error,o=r.refetch;Object(H.c)(Se,{onSubscriptionData:function(){"pending"!==n&&o()}});var i,l=k()(a,"web3.transactionReceipt"),u=k()(a,"web3.transactionReceipt.events",[]),s=k()(a,"web3.blockNumber"),d=k()(a,"web3.transactionReceipt.blockNumber"),m=u.find((function(e){return e.event===t}))||u[0];if(c&&c.message&&!c.message.includes("Invalid JSON RPC response"))console.error(c),i="Error";else if(l&&d)if(l&&d&&!1===l.status){var p="Transaction reverted (tx: ".concat(n,")");console.error(p),i="Error"}else if(m)i=s<=d?"Confirming...":e.children({event:m});else{var b="Expected event not found (tx: ".concat(n,")");console.error(b),i="Error"}else i="Waiting...";return i};function Ce(){var e=te()(["\n  query Wallet {\n    web3 {\n      metaMaskAccount {\n        id\n      }\n      walletType\n      mobileWalletAccount {\n        id\n      }\n      primaryAccount {\n        id\n        proxy {\n          id\n        }\n        predictedProxy {\n          id\n        }\n      }\n    }\n  }\n"]);return Ce=function(){return e},e}var De=ae()(Ce());var Pe=function(e){return function(n){var t=Object(H.b)(De,{fetchPolicy:"network-only",pollInterval:1e3}),r=t.data,a=t.error,c=t.networkStatus;a&&console.error(a);var i=k()(r,"web3.primaryAccount.predictedProxy.id"),l=k()(r,"web3.walletType");return o.a.createElement(e,g()({},n,{wallet:k()(r,"web3.primaryAccount.id"),walletType:l,walletLoading:1===c,walletProxy:k()(r,"web3.primaryAccount.proxy.id"),walletPredictedProxy:i,isOriginWallet:"Origin Wallet"===l||"Mobile"===l}))}};function Ae(){var e=te()(["\n  query GetCurrencyBalances(\n    $tokens: [String]\n    $account: String!\n    $proxy: String!\n    $useProxy: Boolean!\n    $target: String!\n  ) {\n    currencies(tokens: $tokens) {\n      __typename\n      ... on Currency {\n        id\n        name\n        code\n        priceInUSD\n      }\n      ... on Token {\n        id\n        decimals\n        balance(address: $account)\n        allowance(address: $account, target: $target)\n      }\n    }\n    proxyCurrencies: currencies(tokens: $tokens) @include(if: $useProxy) {\n      __typename\n      ... on Currency {\n        id\n        name\n        code\n        priceInUSD\n      }\n      ... on Token {\n        id\n        decimals\n        balance(address: $proxy)\n        allowance(address: $account, target: $proxy)\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var Te=ae()(Ae());var Ie=function(e){return Pe((function(n){var t=Object(H.b)(Te,{skip:!n.wallet,variables:{account:n.wallet,proxy:n.walletPredictedProxy,tokens:n.targets,useProxy:n.walletPredictedProxy!==n.wallet,target:n.allowanceTarget},fetchPolicy:"network-only"}),r=t.data,a=t.error,c=t.refetch;return a&&console.log("withCurrencyPrices",a),o.a.createElement(e,g()({},n,{refetchBalances:c,currencies:k()(r,"currencies")||[],proxyCurrencies:k()(r,"proxyCurrencies")||[]}))}))},$e=t(1639),Ue=t.n($e);var Me=Ie((function(e){var n=e.targets,t=void 0===n?[]:n,r=e.price,a=void 0===r?{}:r,c=e.listing,o=e.currencies,i=e.proxyCurrencies,l=e.children,u=e.refetchBalances,s=J()(e,["targets","price","listing","currencies","proxyCurrencies","children","refetchBalances"]),d=a.currency,m=a.amount;if(i=i.length?i:o,Object.keys(s).some((function(e){return e.endsWith("Loading")&&s[e]})))return l({prices:{},tokenStatus:{loading:!0}});if(!s.wallet)return l({prices:{},tokenStatus:{loading:!1}});if(!d)return l({prices:{},tokenStatus:{loading:!0}});var p=o.find((function(e){return e.id===d.id}));if(!p||!t)return l({prices:{},tokenStatus:{loading:!0}});var b,f=t.reduce((function(e,n){var t=o.find((function(e){return e.id===n}));if(!t)return e;var r=m*p.priceInUSD,a=Ue()(r/t.priceInUSD,16);return e[n]={amount:String(a),currency:t},e}),{}),g=t.reduce((function(e,n){var t=i.find((function(e){return e.id===n}));if(!t)return e;var r=m*p.priceInUSD,a=Ue()(r/t.priceInUSD,16);return e[n]={amount:String(a),currency:t},e}),{}),y=t.reduce((function(e,n){return e[n]=function(e,n,t){var r=(p=k()(n,"".concat(e,".amount"))||"0",p.replace(/^([0-9]+\.[0-9]{18}).*/,"$1")),a=web3.utils.toBN(web3.utils.toWei(r,"ether")),c=k()(n,"".concat(e,".currency.balance"))||"0",o=web3.utils.toBN(c),i=k()(t,"".concat(e,".currency.allowance"))||"0",l=web3.utils.toBN(i),u=o.gte(a),s=a.sub(o).toString(),d=a.sub(l).toString(),m=l.gte(a);var p;"token-ETH"===e&&(m=!0);return{hasBalance:u,hasAllowance:m,needsAllowance:m?0:d,needsBalance:u?0:s,value:r}}(n,f,g),e}),{});if(c){var h=c.acceptedTokens.find((function(e){return"token-ETH"===e.id})),v=c.acceptedTokens.find((function(e){return"token-DAI"===e.id}));b=h&&k()(y,"token-ETH.hasBalance")?"token-ETH":v?"token-DAI":"token-ETH"}return l({prices:f,tokenStatus:y,suggestedToken:b,refetchBalances:u})})),ze=[{id:"token-OGN",name:"OGN"},{id:"token-DAI",name:"DAI"},{id:"token-ETH",name:"ETH"}],Be=function(e){var n=e.exec,t=e.children;return Object(c.useEffect)((function(){n()}),[n]),t},Re=function(e){var n=e.price,t=e.value,r=e.onChange,i=e.onTokenReady,l=e.from,u=Object(p.a)().config,s=Object(c.useState)(),d=a()(s,2),m=d[0],b=d[1],f=Object(c.useState)(),g=a()(f,2),y=g[0],h=g[1],v=Object(H.a)(we,{onCompleted:function(e){h(e.updateTokenAllowance.id)},onError:function(e){console.log(e),b(!1)}}),E=a()(v,1)[0],w=u.acceptedTokens||ze,N=w.find((function(e){return e.id===t}))||w[0],x=w.map((function(e){return e.id}));return o.a.createElement(Me,{price:n,targets:[].concat(ke()(x),["fiat-USD"]),allowanceTarget:u.marketplaceContract||"0x30A8EA8Caa1BF53b42Ea20bA226f0D2177A0B2C7"},(function(e){var a=e.tokenStatus,s=e.refetchBalances,d=a[t];return Object(c.useEffect)((function(){if(d){var e=d.hasBalance&&d.hasAllowance;i(e,d.value)}}),[t,l,k()(d,"hasBalance"),k()(d,"hasAllowance")]),o.a.createElement("div",{className:"crypto-chooser"},o.a.createElement("div",{className:"tokens"},w.map((function(e){return o.a.createElement("div",{key:e.id,className:t===e.id?"active":"",onClick:function(){return r(e.id)}},o.a.createElement("div",null,"Pay with ".concat(e.name)),o.a.createElement("div",null,o.a.createElement(ye,{price:n,target:e.id})),o.a.createElement("div",{className:"sm"},o.a.createElement(ye,{prefix:"1 ".concat(e.name," = "),price:{currency:e.id,amount:"1"},target:"fiat-USD"})))}))),d?d.hasBalance?d.hasAllowance?null:o.a.createElement("div",{className:"alert alert-info mt-3 mb-0 d-flex align-items-center"},"Please unlock your ".concat(N.name," to continue"),o.a.createElement("button",{className:"btn btn-primary btn-sm ml-3".concat(m?" disabled":""),onClick:function(){if(m)return!1;b(!0),E({variables:{to:u.marketplaceContract||"0x30A8EA8Caa1BF53b42Ea20bA226f0D2177A0B2C7",token:t,from:l,value:d.value}})}},y?o.a.createElement(je,{hash:y},(function(){return o.a.createElement(Be,{exec:s},"Done!")})):m?"Awaiting approval...":"Unlock")):o.a.createElement("div",{className:"alert alert-danger mt-3 mb-0"},"Insufficient balance"):null)}))};t(10)("\n  .crypto-chooser\n    .tokens\n      display: flex\n      > div\n        border: 1px solid #eee\n        padding: 1rem\n        border-radius: 0.5rem\n        margin-right: 1rem\n        cursor: pointer\n        text-align: center\n        opacity: 0.75\n        &:hover\n          opacity: 1\n        &.active\n          opacity: 1\n          border-color: #007bff\n        .sm\n          font-size: 0.75rem\n          margin-top: 0.25rem\n\n  @media (max-width: 767.98px)\n    .crypto-chooser\n      .tokens\n        flex-direction: column\n        > div:not(:last-child)\n          margin-bottom: 1rem\n");var qe=function(e){var n=e.walletStatus;return"no-web3"===n?o.a.createElement("div",null,"Cannot query web3"):"no-wallet"===n?o.a.createElement("div",{className:"alert alert-danger"},"No crypto wallet detected."):"loading"===n?o.a.createElement("div",null,"Loading wallet status..."):"wallet-locked"===n?o.a.createElement("div",{className:"alert alert-danger"},"Wallet not unlocked.",o.a.createElement("button",{className:"btn btn-primary",onClick:function(){window.ethereum.enable()}},"Unlock")):"wallet-unapproved"===n?o.a.createElement("div",null,o.a.createElement("button",{className:"btn btn-primary",onClick:function(){window.ethereum.enable()}},"Enable Wallet")):"wrong-network"===n?o.a.createElement("div",{className:"alert alert-danger"},"Wrong network"):o.a.createElement("div",null,"Wallet Connected OK")},Fe=t(1640),_e=t.n(Fe),We=function(e,n){return e&&100*e.normalizedBalance>=n.total},Ke=function(e){var n=e.value,t=e.onChange,r=Object(p.a)().config,i=Object(b.b)(),l=a()(i,2),u=l[0].cart,s=l[1],d=Object(Z.a)(),m=Object(c.useState)(),f=a()(m,2),g=f[0],y=f[1],h=Object(c.useState)(),v=a()(h,2),E=v[0],w=v[1],N=Object(c.useState)([]),x=a()(N,2),O=x[0],S=x[1],j=k()(r,"paymentMethods",[]),C=k()(u,"paymentMethod.id"),D=j.find((function(e){return"uphold"===e.id}));if(!D)return null;Object(c.useEffect)((function(){function e(){return(e=R()(z.a.mark((function e(){var n,t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(r.backend,"/uphold/authed"),e.next=3,fetch(n,{credentials:"include",headers:{authorization:"bearer ".concat(r.backendAuthToken)}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,w(a.redirect),y(!!a.authed);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.backend&&function(){e.apply(this,arguments)}()}),[r]),Object(c.useEffect)((function(){function e(){return(e=R()(z.a.mark((function e(){var n,a,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(r.backend,"/uphold/cards"),e.next=3,fetch(n,{credentials:"include",headers:{authorization:"bearer ".concat(r.backendAuthToken)}});case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,"object"===_e()(c)&&c[0]&&(S(c),t({id:c[0].id,hasBalance:We(c[0],u)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&function(){e.apply(this,arguments)}()}),[g]);var P=O.find((function(e){return e.id===k()(n,"id")})),A=We(P,u),T="uphold"===C?"":" inactive";return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"radio align-items-center".concat(T)},o.a.createElement("input",{type:"radio",name:"paymentMethod",checked:"uphold"===C,onChange:function(){return s({type:"updatePaymentMethod",method:D})}}),"Uphold"),"uphold"===C&&o.a.createElement("div",{className:"pl-4 pb-3 pt-3"},g?O.length?o.a.createElement("table",{className:"table table-sm table-hover uphold-cards"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Select a card:"),d?null:o.a.createElement("th",null,"Amount"),o.a.createElement("th",null,"Amount (USD)"))),o.a.createElement("tbody",null,O.map((function(e){return o.a.createElement("tr",{key:e.id,onClick:function(){return t(e.id)}},o.a.createElement("td",null,o.a.createElement("input",{type:"radio",className:"mr-2",checked:k()(n,"id")===e.id,onChange:function(){return t(e.id)}}),o.a.createElement("span",{className:"uphold-currency currency--".concat(e.currency.toLowerCase())},e.currency),d?null:o.a.createElement("span",{className:"d-none d-xl-inline"},e.label)),d?null:o.a.createElement("td",null,"".concat(e.balance," ").concat(e.currency)),o.a.createElement("td",null,"$ ".concat(e.normalizedBalance," USD")))})))):null:o.a.createElement("a",{href:E,onClick:function(e){e.preventDefault();var n=window.open(E,"","width=330,height=400");window.addEventListener("message",(function e(t){console.log("Got data",t.data),String(t.data).match(/ok/)&&(y(!0),window.removeEventListener("message",e,!1),n.closed||n.close())}),!1)}},o.a.createElement("img",{src:"images/connect_with_uphold.svg"})),O.length?A||!g?null:o.a.createElement("div",{className:"alert alert-danger mt-3 mb-0"},"Insufficient balance"):o.a.createElement("div",{className:"alert alert-danger mt-1 mb-0"},"No Uphold Cards found")))};function Ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ge(Object(t),!0).forEach((function(n){h()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Je(e){if(!e.billingDifferent)return Object.keys(e).forEach((function(n){n.indexOf("Error")>0&&delete e[n]})),{valid:!0,newState:e};var n={};e.billingFirstName||(n.billingFirstNameError="Enter a first name"),e.billingLastName||(n.billingLastNameError="Enter a last name"),e.billingAddress1||(n.billingAddress1Error="Enter an address"),e.billingCity||(n.billingCityError="Enter a city"),e.billingZip||(n.billingZipError="Enter a ZIP / postal code");var t=k()(w.a,"".concat(e.billingCountry,".provinces"),{});return!e.billingProvince&&Object.keys(t).length&&(n.billingProvinceError="Enter a state / province"),{valid:Object.keys(n).every((function(e){return e.indexOf("Error")<0})),newState:Le({},e,{},n)}}t(10)("\n  .uphold-cards\n    tr\n      cursor: pointer\n      font-size: 0.875rem\n      th\n        border-top: 0\n  .uphold-currency\n    padding: 2px\n    display: inline-block\n    border-radius: 3px\n    margin-right: 0.5rem\n    width: 2.5rem\n    color: #fff\n    text-align: center\n    font-size: 0.75rem\n  .currency--aapl\n    background-color: #000\n\n  .currency--ada\n    background-color: #0d1e30\n\n  .currency--adbe\n    background-color: #ed1c24\n\n  .currency--aed\n    background-color: #248d48\n\n  .currency--amd\n    background-color: #000\n\n  .currency--amzn\n    background-color: #ff9d22\n\n  .currency--ars\n    background-color: #75aadb\n\n  .currency--atom\n    background-color: #1b1e36\n\n  .currency--aud\n    background-color: #febd23\n\n  .currency--ba\n    background-color: #115fab\n\n  .currency--baba\n    background-color: #ff6a00\n\n  .currency--bac\n    background-color: #e31837\n\n  .currency--bat\n    background-color: #808696\n\n  .currency--bch\n    background-color: #f7931a\n\n  .currency--bgn\n    background-color: #00966e\n\n  .currency--bmy\n    background-color: #be2bbb\n\n  .currency--brk.b\n    background-color: #452138\n\n  .currency--brl\n    background-color: #2d6447\n\n  .currency--btc\n    background-color: #ffb251\n\n  .currency--btg\n    background-color: #eba808\n\n  .currency--c\n    background-color: #452138\n\n  .currency--cad\n    background-color: #ed2939\n\n  .currency--chf\n    background-color: #d52b1e\n\n  .currency--cmcsa\n    background-color: #0089cf\n\n  .currency--cny\n    background-color: #eb4242\n\n  .currency--csco\n    background-color: #049fd9\n\n  .currency--czk\n    background-color: #d7141a\n\n  .currency--dash\n    background-color: #1b77b8\n\n  .currency--dcr\n    background-color: #2ed6a1\n\n  .currency--dhr\n    background-color: #013c81\n\n  .currency--dis\n    background-color: #1300bc\n\n  .currency--dgb\n    background-color: #06c\n\n  .currency--dkk\n    background-color: #cc0001\n\n  .currency--doge\n    background-color: #c2a633\n\n  .currency--eem\n    background-color: #176cd2\n\n  .currency--efa\n    background-color: #1780d2\n\n  .currency--eos\n    background-color: #111a44\n\n  .currency--eth\n    background-color: #444341\n\n  .currency--eur\n    background-color: #557bc8\n\n  .currency--ewz\n    background-color: #1776d2\n\n  .currency--fb\n    background-color: #1777f2\n\n  .currency--fxi\n    background-color: #179ed2\n\n  .currency--gbp\n    background-color: #9f6ecc\n\n  .currency--gdx\n    background-color: #221e1f\n\n  .currency--gld\n    background-color: #13a96c\n\n  .currency--goog\n    background-color: #34a853\n\n  .currency--googl\n    background-color: #4285f4\n\n  .currency--hd\n    background-color: #ee7125\n\n  .currency--hkd\n    background-color: #c8102e\n\n  .currency--hrk\n    background-color: #ff202d\n\n  .currency--huf\n    background-color: #087b39\n\n  .currency--hyg\n    background-color: #1794d2\n\n  .currency--ils\n    background-color: #69f\n\n  .currency--inr\n    background-color: #f47500\n\n  .currency--intc\n    background-color: #0071c5\n\n  .currency--iota\n    background-color: #000\n\n  .currency--isk\n    background-color: #00589d\n\n  .currency--ivv\n    background-color: #17a8d2\n\n  .currency--iwm\n    background-color: #1762d2\n\n  .currency--jnj\n    background-color: #d51900\n\n  .currency--jpm\n    background-color: #117aca\n\n  .currency--jpy\n    background-color: #ccc\n\n  .currency--kes\n    background-color: #a1250f\n\n  .currency--lba\n    background-color: #0957c3\n\n  .currency--link\n    background-color: #2a5ada\n\n  .currency--lqd\n    background-color: #178ad2\n\n  .currency--ltc\n    background-color: #6d6d6d\n\n  .currency--ma\n    background-color: #f90\n\n  .currency--msft\n    background-color: #737373\n\n  .currency--mu\n    background-color: #0077c8\n\n  .currency--mxn\n    background-color: #005d40\n\n  .currency--nano\n    background-color: #4a90e2\n\n  .currency--neo\n    background-color: #58bf00\n\n  .currency--nflx\n    background-color: #e50914\n\n  .currency--nok\n    background-color: #ef2b2d\n\n  .currency--nvda\n    background-color: #77b900\n\n  .currency--nzd\n    background-color: #212121\n\n  .currency--omg\n    background-color: #1a53f0\n\n  .currency--pg\n    background-color: #003cae\n\n  .currency--php\n    background-color: #4169e1\n\n  .currency--pln\n    background-color: crimson\n\n  .currency--qqq\n    background-color: #193989\n\n  .currency--roku\n    background-color: #6c3c97\n\n  .currency--ron\n    background-color: #fcd116\n\n  .currency--sek\n    background-color: #0071b8\n\n  .currency--sgd\n    background-color: #f42a41\n\n  .currency--spy\n    background-color: #189f71\n\n  .currency--storm\n    background-color: #6b38df\n\n  .currency--t\n    background-color: #00a8e0\n\n  .currency--tlt\n    background-color: #17b2d2\n\n  .currency--tqqq\n    background-color: #03576a\n\n  .currency--trx\n    background-color: #dc062b\n\n  .currency--tsla\n    background-color: #c00\n\n  .currency--unh\n    background-color: #1c3d95\n\n  .currency--usd\n    background-color: #5a9f4f\n\n  .currency--upbtc\n    background-color: #2744f7\n\n  .currency--upeur\n    background-color: #2744f7\n\n  .currency--upt\n    background-color: #2744f7\n\n  .currency--upusd\n    background-color: #2744f7\n\n  .currency--v\n    background-color: #00579f\n\n  .currency--vox\n    background-color: #4a4a4f\n\n  .currency--wfc\n    background-color: #b31e30\n\n  .currency--xag\n    background-color: #b2b2b2\n\n  .currency--xau\n    background-color: #eed06f\n\n  .currency--xem\n    background-color: #78b6e4\n\n  .currency--xlf\n    background-color: #0fbd67\n\n  .currency--xlm\n    background-color: #000\n\n  .currency--xlu\n    background-color: #1c8b76\n\n  .currency--xom\n    background-color: #ed1b2d\n\n  .currency--xpd\n    background-color: #acb4b7\n\n  .currency--xpt\n    background-color: #c9bcb5\n\n  .currency--xrp\n    background-color: #222\n\n  .currency--zil\n    background-color: #00c3bf\n\n  .currency--zrx\n    background-color: #000\n\n  .currency--brave\n    background-color: #ff2000\n\n");var He=Object(l.injectStripe)((function(e){var n=e.stripe,t=Object(p.a)().config,r=Object(Z.a)(),u=Object(c.useState)("token-ETH"),s=a()(u,2),d=s[0],m=s[1],f=Object(c.useState)({}),y=a()(f,2),h=y[0],v=y[1],w=Object(c.useState)(),x=a()(w,2),O=x[0],S=x[1],j=Object(c.useState)({}),C=a()(j,2),D=C[0],A=C[1],T=Object(c.useState)(!1),I=a()(T,2),$=I[0],M=I[1],B=Object(c.useState)({}),q=a()(B,2),F=q[0],_=q[1],W=Object(c.useState)(),K=a()(W,2),G=K[0],L=K[1],Y=Object(b.b)(),Q=a()(Y,2),X=Q[0],ne=X.cart,te=X.referrer,re=Q[1],ae=Object(c.useState)(),ce=a()(ae,2),ie=ce[0],ue=ce[1],se=Object(c.useState)(),de=a()(se,2),me=de[0],pe=de[1],be=Object(c.useState)(),fe=a()(be,2),ge=fe[0],ve=fe[1],ke=Object(i.g)(),Ee=k()(ne,"paymentMethod.id"),we=Object(c.useState)(Le({},ne.userInfo,{billingCountry:ne.userInfo.billingCountry||"United States"})),Ne=a()(we,2),xe=Ne[0],Oe=Ne[1],Se=function(e){return Oe(Le({},xe,{},e))},Ce=Object(E.b)(xe,(function(e){return Se(e)})),De=k()(t,"paymentMethods",[]),Pe=De.find((function(e){return"crypto"===e.id}));Object(c.useEffect)((function(){1===De.length&&re({type:"updatePaymentMethod",method:De[0]})}),[De.length]);var Ae=Object(H.b)(oe,{notifyOnNetworkStatusChange:!0,skip:"crypto"!==Ee}),Te=Ae.data,Ie=Ae.loading,$e=function(e,n){if(n)return"loading";var t=k()(e,"web3");if(!t)return"no-web3";var r="MetaMask"===k()(e,"web3.walletType");return t.metaMaskAvailable?r&&!t.metaMaskUnlocked?"wallet-locked":r&&!t.metaMaskApproved?"wallet-unapproved":t.networkId!==t.metaMaskNetworkId?"wrong-network":"ready":"no-wallet"}(Te,Ie),Ue=k()(t,"listingId"),Me=Object(H.a)(le,{onCompleted:function(e){ve(e.makeOffer.id)},onError:function(e){console.log(e),ue(!1),M(!1)}}),ze=a()(Me,1)[0];Object(c.useEffect)((function(){if(n&&"stripe"===Ee&&!G){console.log("Make Stripe payment request...");try{var e=n.paymentRequest({country:"US",currency:"usd",total:{label:"Item Total",amount:ne.subTotal},requestPayerName:!0,requestPayerEmail:!0,requestShipping:!0,shippingOptions:[ne.shipping]});e.on("token",(function(e){var n=e.complete,t=e.token,r=J()(e,["complete","token"]);console.log("Received Stripe token: ",t),console.log("Received customer information: ",r),n("success")})),L(e)}catch(e){console.log("paymentRequest error",e)}}}),[n,Ee]),Object(c.useEffect)((function(){function e(){return(e=R()(z.a.mark((function e(){var r,a,c,o,i;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),S(!1),e.next=4,ee(Le({},ne,{referrer:te}),t);case 4:r=e.sent,a=r.auth,c=r.hash,"stripe"===Ee?(o=t.backend,V({backend:o,backendAuthToken:t.backendAuthToken,stripe:n,cart:ne,encryptedData:r,listingId:Ue}).then((function(e){e.error?(A(Le({},D,{cardError:e.error.message})),M(!1)):ke.push("/order/".concat(c,"?auth=").concat(a))})).catch((function(e){console.log(e),A(Le({},D,{cardError:"Payment server error. Please try again later."})),M(!1)}))):"crypto"===Ee?(i={listingID:Ue,value:h.tokenValue,currency:d,from:k()(Te,"web3.metaMaskAccount.id"),quantity:1,autoswap:!0,encryptedData:c},ue(!0),pe(a),ze({variables:i})):"uphold"===Ee&&F.hasBalance&&fetch("".concat(t.backend,"/uphold/pay"),{method:"POST",credentials:"include",headers:{Authorization:"bearer ".concat(t.backendAuthToken),"Content-Type":"application/json"},body:JSON.stringify({card:F.id,data:c,amount:ne.total/100})}).then((function(e){e.error?(A(Le({},D,{cardError:e.error.message})),M(!1)):ke.push("/order/".concat(c,"?auth=").concat(a))})).catch((function(e){console.log(e),A(Le({},D,{cardError:"Payment server error. Please try again later."})),M(!1)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}O&&function(){e.apply(this,arguments)}()}),[O]);var Be=Object(E.a)(D),Fe=Object(E.a)(xe),_e={currency:{id:"fiat-USD"},amount:String(ne.total/100)},We=Object(U.a)(ne.total),Ge=$||!Ee;return"crypto"===Ee?("ready"===$e&&d&&h.ready&&!ie||(Ge=!0),d&&(We=o.a.createElement(ye,{price:_e,target:d}))):"uphold"!==Ee||F.hasBalance||(Ge=!0),o.a.createElement("form",{onSubmit:function(){var e=R()(z.a.mark((function e(n){var t,r,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!Ge){e.next=3;break}return e.abrupt("return");case 3:if(t=Je(xe),r=t.valid,a=t.newState,Se(a),r){e.next=7;break}return e.abrupt("return");case 7:re({type:"updateUserInfo",info:a}),S(!0);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},o.a.createElement("div",{className:"checkout-payment-method"},Pe?o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{className:"radio".concat("crypto"===Ee?"":" inactive")},o.a.createElement("input",{type:"radio",name:"paymentMethod",checked:"crypto"===Ee,onChange:function(){Se({billingDifferent:!1}),re({type:"updatePaymentMethod",method:t.paymentMethods.find((function(e){return"crypto"===e.id}))})}}),"Crypto Currency"),"crypto"===Ee&&o.a.createElement("div",{className:"pl-4 pt-2"},"ready"===$e?o.a.createElement(Re,{from:k()(Te,"web3.metaMaskAccount.id"),value:d,onChange:function(e){return m(e)},onTokenReady:function(e,n){return v({ready:e,tokenValue:n})},price:_e}):o.a.createElement(qe,{walletStatus:$e}))):null,t.stripe?o.a.createElement("label",{className:"radio align-items-center".concat("stripe"===Ee?"":" inactive")},o.a.createElement("input",{type:"radio",name:"paymentMethod",checked:"stripe"===Ee,onChange:function(){return re({type:"updatePaymentMethod",method:t.paymentMethods.find((function(e){return"stripe"===e.id}))})}}),"Credit Card",r?null:o.a.createElement("div",{className:"cards"},o.a.createElement("div",{className:"visa"}),o.a.createElement("div",{className:"master"}),o.a.createElement("div",{className:"amex"}),o.a.createElement("div",{className:"discover"}),"and more...")):null,"stripe"===Ee&&o.a.createElement("div",{className:"pl-4 pb-3 pt-3"},o.a.createElement("div",{className:"form-row"},o.a.createElement(l.CardElement,{className:"form-control",style:{base:{fontSize:"16px",lineHeight:"24px"}}}),Be("card"),o.a.createElement("img",{src:"images/powered_by_stripe.svg",className:"ml-auto mt-2"}))),o.a.createElement(Ke,{value:F,onChange:function(e){return _(e)}})),"stripe"!==Ee?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mt-4 mb-3"},o.a.createElement("b",null,"Billing Address"),o.a.createElement("div",null,"Select the address that matches your card or payment method.")),o.a.createElement("div",{className:"checkout-payment-method"},o.a.createElement("label",{className:"radio ".concat(xe.billingDifferent?"inactive":"active")},o.a.createElement("input",{type:"radio",name:"billingDifferent",checked:!xe.billingDifferent,onChange:function(){return Se({billingDifferent:!1})}}),o.a.createElement("div",null,o.a.createElement("div",null,"Same as shipping address"))),o.a.createElement("label",{className:"radio ".concat(xe.billingDifferent?"active mb-3":"inactive")},o.a.createElement("input",{type:"radio",name:"billingDifferent",checked:!!xe.billingDifferent,onChange:function(){return Se({billingDifferent:!0})}}),o.a.createElement("div",null,o.a.createElement("div",null,"Use a different billing address"))),xe.billingDifferent?o.a.createElement(P,g()({prefix:"billing"},{state:xe,setState:Se,input:Ce,Feedback:Fe})):null)),o.a.createElement("div",{className:"actions"},o.a.createElement(N.a,{to:"/checkout/shipping"},"« Return to shipping"),o.a.createElement(he,{type:"submit",className:"btn btn-primary btn-lg ".concat(Ge?" disabled":""),loading:$,children:ge?o.a.createElement(je,{hash:ge},(function(){return o.a.createElement(Ze,{exec:function(){ke.push("/order/".concat(ge,"?auth=").concat(me))}},"Success")})):ie?o.a.createElement(o.a.Fragment,null,"Awaiting approval..."):o.a.createElement(o.a.Fragment,null,"Pay ",We)})))})),Ze=function(e){var n=e.exec,t=e.children;return Object(c.useEffect)((function(){n()}),[n]),t},Ye=He;t(10)("\n  .checkout-payment-method\n    border: 1px solid #eee\n    border-radius: 0.5rem\n    padding: 1rem\n    label\n      margin-bottom: 0\n    label .description\n      font-size: 0.875rem\n      color: #666\n    label.inactive\n      cursor: pointer\n      &:hover\n        color: #666\n    label:not(:first-child)\n      border-top: 1px solid #eee\n      margin-top: 1rem\n      padding-top: 1rem\n    .radio\n      display: flex\n      align-items: baseline\n      input\n        margin-right: 0.5rem\n        margin-bottom: 3px\n      .cards\n        margin-left: auto\n        display: flex\n        font-size: 12px\n        color: #737373\n        align-items: center\n        > div\n          width: 38px\n          height: 24px\n          margin-right: 4px\n          &.visa\n            background: url(images/visa.svg)\n          &.master\n            background: url(images/master.svg)\n          &.amex\n            background: url(images/amex.svg)\n          &.discover\n            background: url(images/discover.svg)\n          &:last-child\n            margin-right: 8px\n\n");var Ve=function(){var e=Object(p.a)().config,n=Object(b.b)(),t=a()(n,1)[0].cart;return o.a.createElement("div",{className:"checkout-shipping"},o.a.createElement("div",{className:"d-none d-md-block"},o.a.createElement("h3",null,e.fullTitle),o.a.createElement("div",{className:"breadcrumbs"},o.a.createElement(N.a,{to:"/cart"},"Cart"),o.a.createElement(N.a,{to:"/checkout"},"Information"),o.a.createElement(N.a,{to:"/checkout/shipping"},"Shipping"),o.a.createElement("span",null,"Payment"))),o.a.createElement("div",{className:"checkout-review-info"},o.a.createElement(_,null),o.a.createElement(W,null),o.a.createElement("div",{className:"info-row"},o.a.createElement("div",{className:"label"},"Method"),o.a.createElement("div",{className:"value"},k()(t,"shipping.label")),o.a.createElement(N.a,{className:"change",to:"/checkout/shipping"},"Change"))),o.a.createElement("div",{className:"mt-4 mb-3"},o.a.createElement("b",null,"Payment"),o.a.createElement("div",null,"All transactions are secure and encrypted")),o.a.createElement(Ye,null),o.a.createElement(A,null))},Qe=t(115);n.default=function(){var e=Object(p.a)().config,n=Object(i.g)(),t=Object(b.b)(),r=a()(t,1)[0].cart,d=Object(c.useState)(null),f=a()(d,2),g=f[0],y=f[1];return Object(c.useEffect)((function(){if(r.items.length)if(window.Stripe)y(window.Stripe(e.stripeKey));else{if(e.stripe&&e.stripeKey){var t=document.createElement("script");t.src="https://js.stripe.com/v3/",t.addEventListener("load",(function(){y(window.Stripe(e.stripeKey))})),document.head.appendChild(t)}m.a.addStylesheet()}else n.push("/cart")}),[]),o.a.createElement(u.a,{client:s.a},o.a.createElement(l.StripeProvider,{stripe:g},o.a.createElement(l.Elements,null,o.a.createElement("div",{className:"checkout"},o.a.createElement("h3",{className:"d-md-none my-4 ml-4"},e.fullTitle),o.a.createElement("div",{className:"user-details"},o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/checkout/shipping",component:G}),o.a.createElement(i.b,{path:"/checkout/payment",component:Ve}),o.a.createElement(i.b,{path:"/checkout",component:$}))),o.a.createElement("div",{className:"order-summary-wrap"},o.a.createElement(Qe.a,{cart:r,discountForm:!0,donationForm:!0}))))))};t(10)("\n  .checkout\n    display: flex\n    h3,h4,h5\n      font-weight: 400\n    .breadcrumbs\n      font-size: 0.8rem\n      a\n        color: #1990c6\n    > .user-details\n      flex: 7\n      padding: 3rem\n      display: flex\n      justify-content: flex-end\n      .checkout-information,.checkout-shipping\n        padding: 1rem\n        max-width: 600px\n        width: 100%\n      .actions\n        display: flex\n        justify-content: space-between\n        align-items: center\n        margin-top: 2rem\n    > .order-summary-wrap\n      padding: 3rem\n      flex: 6\n      min-height: 100vh\n      border-width: 0 0 0 1px\n      border-style: solid\n      border-color: #ddd\n      background: #f6f6f6\n\n\n  @media (max-width: 767.98px)\n    .checkout\n      flex-direction: column\n      > .user-details\n        padding: 1rem\n        order: 2\n        .checkout-information,.checkout-shipping\n          padding: 1rem 0\n        .actions\n          flex-direction: column-reverse\n          margin-bottom: 5rem\n          *\n            margin-bottom: 2rem\n      > .order-summary-wrap\n        padding: 1rem 1.25rem\n        border-width: 1px 0 1px 0\n        min-height: 0\n        .toggle-order-summary\n          display: flex\n          justify-content: space-between\n          .txt\n            color: #1990c6\n          .icon-caret\n            fill: #1990c6\n            margin-left: 0.5rem\n          .icon-cart\n            margin-right: 0.5rem\n            width: 1.5rem\n          &.active\n            .icon-caret\n              transform: scaleY(-1)\n\n        .order-summary\n          margin-top: 2rem\n          display: none\n          &.show\n            display: block\n\n")},637:function(e,n){},638:function(e,n){},658:function(e,n){},660:function(e,n){},679:function(e,n){},748:function(e,n){},827:function(e,n){},828:function(e,n){},833:function(e,n){}}]);